var z=Object.defineProperty;var q=(x,n,a)=>n in x?z(x,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):x[n]=a;var b=(x,n,a)=>(q(x,typeof n!="symbol"?n+"":n,a),a);var W=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Z(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,"default")?x.default:x}var F={};(function(x){Object.defineProperty(x,"__esModule",{value:!0}),x.default=void 0;function n(i){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(i)}function a(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!t){if(Array.isArray(i)||(t=p(i))||e&&i&&typeof i.length=="number"){t&&(i=t);var o=0,s=function(){};return{s,n:function(){return o>=i.length?{done:!0}:{done:!1,value:i[o++]}},e:function(f){throw f},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var r=!0,l=!1,h;return{s:function(){t=t.call(i)},n:function(){var f=t.next();return r=f.done,f},e:function(f){l=!0,h=f},f:function(){try{!r&&t.return!=null&&t.return()}finally{if(l)throw h}}}}function d(i){return v(i)||C(i)||p(i)||g()}function g(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p(i,e){if(i){if(typeof i=="string")return y(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return y(i,e)}}function C(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function v(i){if(Array.isArray(i))return y(i)}function y(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,o=new Array(e);t<e;t++)o[t]=i[t];return o}function S(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function O(i,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(i,o.key,o)}}function A(i,e,t){return e&&O(i.prototype,e),t&&O(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function m(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}var N=function(){function i(e,t){var o=this;if(S(this,i),m(this,"defaultOptions",{sourceAttr:"href",overlay:!0,overlayOpacity:.7,spinner:!0,nav:!0,navText:["&lsaquo;","&rsaquo;"],captions:!0,captionDelay:0,captionSelector:"img",captionType:"attr",captionsData:"title",captionPosition:"bottom",captionClass:"",captionHTML:!0,close:!0,closeText:"&times;",swipeClose:!0,showCounter:!0,fileExt:"png|jpg|jpeg|gif|webp",animationSlide:!0,animationSpeed:250,preloading:!0,enableKeyboard:!0,loop:!0,rel:!1,docClose:!0,swipeTolerance:50,className:"simple-lightbox",widthRatio:.8,heightRatio:.9,scaleImageToRatio:!1,disableRightClick:!1,disableScroll:!0,alertError:!0,alertErrorMessage:"Image not found, next image will be loaded",additionalHtml:!1,history:!0,throttleInterval:0,doubleTapZoom:2,maxZoom:10,htmlClass:"has-lightbox",rtl:!1,fixedClass:"sl-fixed",fadeSpeed:300,uniqueImages:!0,focus:!0,scrollZoom:!0,scrollZoomFactor:.5,download:!1}),m(this,"transitionPrefix",void 0),m(this,"isPassiveEventsSupported",void 0),m(this,"transitionCapable",!1),m(this,"isTouchDevice","ontouchstart"in window),m(this,"isAppleDevice",/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),m(this,"initialLocationHash",void 0),m(this,"pushStateSupport","pushState"in history),m(this,"isOpen",!1),m(this,"isAnimating",!1),m(this,"isClosing",!1),m(this,"isFadeIn",!1),m(this,"urlChangedOnce",!1),m(this,"hashReseted",!1),m(this,"historyHasChanges",!1),m(this,"historyUpdateTimeout",null),m(this,"currentImage",void 0),m(this,"eventNamespace","simplelightbox"),m(this,"domNodes",{}),m(this,"loadedImages",[]),m(this,"initialImageIndex",0),m(this,"currentImageIndex",0),m(this,"initialSelector",null),m(this,"globalScrollbarWidth",0),m(this,"controlCoordinates",{swipeDiff:0,swipeYDiff:0,swipeStart:0,swipeEnd:0,swipeYStart:0,swipeYEnd:0,mousedown:!1,imageLeft:0,zoomed:!1,containerHeight:0,containerWidth:0,containerOffsetX:0,containerOffsetY:0,imgHeight:0,imgWidth:0,capture:!1,initialOffsetX:0,initialOffsetY:0,initialPointerOffsetX:0,initialPointerOffsetY:0,initialPointerOffsetX2:0,initialPointerOffsetY2:0,initialScale:1,initialPinchDistance:0,pointerOffsetX:0,pointerOffsetY:0,pointerOffsetX2:0,pointerOffsetY2:0,targetOffsetX:0,targetOffsetY:0,targetScale:0,pinchOffsetX:0,pinchOffsetY:0,limitOffsetX:0,limitOffsetY:0,scaleDifference:0,targetPinchDistance:0,touchCount:0,doubleTapped:!1,touchmoveCount:0}),this.options=Object.assign(this.defaultOptions,t),this.isPassiveEventsSupported=this.checkPassiveEventsSupport(),typeof e=="string"?(this.initialSelector=e,this.elements=Array.from(document.querySelectorAll(e))):this.elements=typeof e.length<"u"&&e.length>0?Array.from(e):[e],this.relatedElements=[],this.transitionPrefix=this.calculateTransitionPrefix(),this.transitionCapable=this.transitionPrefix!==!1,this.initialLocationHash=this.hash,this.options.rel&&(this.elements=this.getRelated(this.options.rel)),this.options.uniqueImages){var s=[];this.elements=Array.from(this.elements).filter(function(r){var l=r.getAttribute(o.options.sourceAttr);return s.indexOf(l)===-1?(s.push(l),!0):!1})}this.createDomNodes(),this.options.close&&this.domNodes.wrapper.appendChild(this.domNodes.closeButton),this.options.nav&&this.domNodes.wrapper.appendChild(this.domNodes.navigation),this.options.spinner&&this.domNodes.wrapper.appendChild(this.domNodes.spinner),this.addEventListener(this.elements,"click."+this.eventNamespace,function(r){if(o.isValidLink(r.currentTarget)){if(r.preventDefault(),o.isAnimating)return!1;o.initialImageIndex=o.elements.indexOf(r.currentTarget),o.openImage(r.currentTarget)}}),this.options.docClose&&this.addEventListener(this.domNodes.wrapper,["click."+this.eventNamespace,"touchstart."+this.eventNamespace],function(r){o.isOpen&&r.target===r.currentTarget&&o.close()}),this.options.disableRightClick&&this.addEventListener(document.body,"contextmenu."+this.eventNamespace,function(r){r.target.parentElement.classList.contains("sl-image")&&r.preventDefault()}),this.options.enableKeyboard&&this.addEventListener(document.body,"keyup."+this.eventNamespace,this.throttle(function(r){if(o.controlCoordinates.swipeDiff=0,o.isAnimating&&r.key==="Escape"){o.currentImage.setAttribute("src",""),o.isAnimating=!1,o.close();return}o.isOpen&&(r.preventDefault(),r.key==="Escape"&&o.close(),!o.isAnimating&&["ArrowLeft","ArrowRight"].indexOf(r.key)>-1&&o.loadImage(r.key==="ArrowRight"?1:-1))},this.options.throttleInterval)),this.addEvents()}return A(i,[{key:"checkPassiveEventsSupport",value:function(){var t=!1;try{var o=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassive",null,o),window.removeEventListener("testPassive",null,o)}catch{}return t}},{key:"getCaptionElement",value:function(t){if(this.options.captionSelector.startsWith("+")){var o=this.options.captionSelector.replace(/^\+/,"").trimStart(),s=t.nextElementSibling;return s&&s.matches(o)?s:!1}else if(this.options.captionSelector.startsWith(">")){var r=this.options.captionSelector.replace(/^>/,"").trimStart();return t.querySelector(r)}else return t.querySelector(this.options.captionSelector)}},{key:"generateQuerySelector",value:function(t){var o=t.tagName,s=t.id,r=t.className,l=t.parentNode;if(o==="HTML")return"HTML";var h=o;if(h+=s!==""?"#".concat(s):"",r)for(var c=r.trim().split(/\s/),f=0;f<c.length;f++)h+=".".concat(c[f]);for(var u=1,w=t;w.previousElementSibling;w=w.previousElementSibling)u+=1;return h+=":nth-child(".concat(u,")"),"".concat(this.generateQuerySelector(l)," > ").concat(h)}},{key:"createDomNodes",value:function(){if(this.domNodes.overlay=document.createElement("div"),this.domNodes.overlay.classList.add("sl-overlay"),this.domNodes.overlay.dataset.opacityTarget=this.options.overlayOpacity,this.domNodes.closeButton=document.createElement("button"),this.domNodes.closeButton.classList.add("sl-close"),this.domNodes.closeButton.innerHTML=this.options.closeText,this.domNodes.spinner=document.createElement("div"),this.domNodes.spinner.classList.add("sl-spinner"),this.domNodes.spinner.innerHTML="<div></div>",this.domNodes.navigation=document.createElement("div"),this.domNodes.navigation.classList.add("sl-navigation"),this.domNodes.navigation.innerHTML='<button class="sl-prev">'.concat(this.options.navText[0],'</button><button class="sl-next">').concat(this.options.navText[1],"</button>"),this.domNodes.counter=document.createElement("div"),this.domNodes.counter.classList.add("sl-counter"),this.domNodes.counter.innerHTML='<span class="sl-current"></span>/<span class="sl-total"></span>',this.domNodes.download=document.createElement("div"),this.domNodes.download.classList.add("sl-download"),this.domNodes.downloadLink=document.createElement("a"),this.domNodes.downloadLink.setAttribute("download",""),this.domNodes.downloadLink.textContent=this.options.download,this.domNodes.download.appendChild(this.domNodes.downloadLink),this.domNodes.caption=document.createElement("div"),this.domNodes.caption.classList.add("sl-caption","pos-"+this.options.captionPosition),this.options.captionClass){var t,o=this.options.captionClass.split(/[\s,]+/);(t=this.domNodes.caption.classList).add.apply(t,d(o))}this.domNodes.image=document.createElement("div"),this.domNodes.image.classList.add("sl-image"),this.domNodes.wrapper=document.createElement("div"),this.domNodes.wrapper.classList.add("sl-wrapper"),this.domNodes.wrapper.setAttribute("tabindex",-1),this.domNodes.wrapper.setAttribute("role","dialog"),this.domNodes.wrapper.setAttribute("aria-hidden",!1),this.options.className&&this.domNodes.wrapper.classList.add(this.options.className),this.options.rtl&&this.domNodes.wrapper.classList.add("sl-dir-rtl")}},{key:"throttle",value:function(t,o){var s;return function(){s||(t.apply(this,arguments),s=!0,setTimeout(function(){return s=!1},o))}}},{key:"isValidLink",value:function(t){return!this.options.fileExt||t.getAttribute(this.options.sourceAttr)&&new RegExp("("+this.options.fileExt+")($|\\?.*$)","i").test(t.getAttribute(this.options.sourceAttr))}},{key:"calculateTransitionPrefix",value:function(){var t=(document.body||document.documentElement).style;return"transition"in t?"":"WebkitTransition"in t?"-webkit-":"MozTransition"in t?"-moz-":"OTransition"in t?"-o":!1}},{key:"getScrollbarWidth",value:function(){var t=0,o=document.createElement("div");return o.classList.add("sl-scrollbar-measure"),document.body.appendChild(o),t=o.offsetWidth-o.clientWidth,document.body.removeChild(o),t}},{key:"toggleScrollbar",value:function(t){var o=0,s=[].slice.call(document.querySelectorAll("."+this.options.fixedClass));if(t==="hide"){var r=window.innerWidth;if(!r){var l=document.documentElement.getBoundingClientRect();r=l.right-Math.abs(l.left)}if(document.body.clientWidth<r||this.isAppleDevice){var h=parseInt(window.getComputedStyle(document.body).paddingRight||0,10);o=this.getScrollbarWidth(),document.body.dataset.originalPaddingRight=h,(o>0||o==0&&this.isAppleDevice)&&(document.body.classList.add("hidden-scroll"),document.body.style.paddingRight=h+o+"px",s.forEach(function(c){var f=c.style.paddingRight,u=window.getComputedStyle(c)["padding-right"];c.dataset.originalPaddingRight=f,c.style.paddingRight="".concat(parseFloat(u)+o,"px")}))}}else document.body.classList.remove("hidden-scroll"),document.body.style.paddingRight=document.body.dataset.originalPaddingRight+"px",s.forEach(function(c){var f=c.dataset.originalPaddingRight;typeof f<"u"&&(c.style.paddingRight=f)});return o}},{key:"close",value:function(){var t=this;if(!this.isOpen||this.isAnimating||this.isClosing)return!1;this.isClosing=!0;var o=this.relatedElements[this.currentImageIndex];o.dispatchEvent(new Event("close.simplelightbox")),this.options.history&&(this.historyHasChanges=!1,this.hashReseted||this.resetHash()),this.removeEventListener(document,"focusin."+this.eventNamespace),this.fadeOut(this.domNodes.overlay,this.options.fadeSpeed),this.fadeOut(document.querySelectorAll(".sl-image img,  .sl-close, .sl-navigation, .sl-image .sl-caption, .sl-counter"),this.options.fadeSpeed,function(){t.options.disableScroll&&t.toggleScrollbar("show"),t.options.htmlClass&&t.options.htmlClass!==""&&document.querySelector("html").classList.remove(t.options.htmlClass),document.body.removeChild(t.domNodes.wrapper),t.options.overlay&&document.body.removeChild(t.domNodes.overlay),t.domNodes.additionalHtml=null,t.domNodes.download=null,o.dispatchEvent(new Event("closed.simplelightbox")),t.isClosing=!1}),this.currentImage=null,this.isOpen=!1,this.isAnimating=!1;for(var s in this.controlCoordinates)this.controlCoordinates[s]=0;this.controlCoordinates.mousedown=!1,this.controlCoordinates.zoomed=!1,this.controlCoordinates.capture=!1,this.controlCoordinates.initialScale=this.minMax(1,1,this.options.maxZoom),this.controlCoordinates.doubleTapped=!1}},{key:"hash",get:function(){return window.location.hash.substring(1)}},{key:"preload",value:function(){var t=this,o=this.currentImageIndex,s=this.relatedElements.length,r=o+1<0?s-1:o+1>=s-1?0:o+1,l=o-1<0?s-1:o-1>=s-1?0:o-1,h=new Image,c=new Image;h.addEventListener("load",function(f){var u=f.target.getAttribute("src");t.loadedImages.indexOf(u)===-1&&t.loadedImages.push(u),t.relatedElements[o].dispatchEvent(new Event("nextImageLoaded."+t.eventNamespace))}),h.setAttribute("src",this.relatedElements[r].getAttribute(this.options.sourceAttr)),c.addEventListener("load",function(f){var u=f.target.getAttribute("src");t.loadedImages.indexOf(u)===-1&&t.loadedImages.push(u),t.relatedElements[o].dispatchEvent(new Event("prevImageLoaded."+t.eventNamespace))}),c.setAttribute("src",this.relatedElements[l].getAttribute(this.options.sourceAttr))}},{key:"loadImage",value:function(t){var o=this,s=t;this.options.rtl&&(t=-t),this.relatedElements[this.currentImageIndex].dispatchEvent(new Event("change."+this.eventNamespace)),this.relatedElements[this.currentImageIndex].dispatchEvent(new Event((t===1?"next":"prev")+"."+this.eventNamespace));var r=this.currentImageIndex+t;if(this.isAnimating||(r<0||r>=this.relatedElements.length)&&this.options.loop===!1)return!1;this.currentImageIndex=r<0?this.relatedElements.length-1:r>this.relatedElements.length-1?0:r,this.domNodes.counter.querySelector(".sl-current").innerHTML=this.currentImageIndex+1,this.options.animationSlide&&this.slide(this.options.animationSpeed/1e3,-100*s-this.controlCoordinates.swipeDiff+"px"),this.fadeOut(this.domNodes.image,this.options.fadeSpeed,function(){o.isAnimating=!0,o.isClosing?o.isAnimating=!1:setTimeout(function(){var l=o.relatedElements[o.currentImageIndex];o.currentImage&&(o.currentImage.setAttribute("src",l.getAttribute(o.options.sourceAttr)),o.loadedImages.indexOf(l.getAttribute(o.options.sourceAttr))===-1&&o.show(o.domNodes.spinner),o.domNodes.image.contains(o.domNodes.caption)&&o.domNodes.image.removeChild(o.domNodes.caption),o.adjustImage(s),o.options.preloading&&o.preload())},100)})}},{key:"adjustImage",value:function(t){var o=this;if(!this.currentImage)return!1;var s=new Image,r=window.innerWidth*this.options.widthRatio,l=window.innerHeight*this.options.heightRatio;s.setAttribute("src",this.currentImage.getAttribute("src")),this.currentImage.dataset.scale=1,this.currentImage.dataset.translateX=0,this.currentImage.dataset.translateY=0,this.zoomPanElement(0,0,1),s.addEventListener("error",function(h){o.relatedElements[o.currentImageIndex].dispatchEvent(new Event("error."+o.eventNamespace)),o.isAnimating=!1,o.isOpen=!0,o.domNodes.spinner.style.display="none";var c=t===1||t===-1;if(o.initialImageIndex===o.currentImageIndex&&c)return o.close();o.options.alertError&&alert(o.options.alertErrorMessage),o.loadImage(c?t:1)}),s.addEventListener("load",function(h){typeof t<"u"&&(o.relatedElements[o.currentImageIndex].dispatchEvent(new Event("changed."+o.eventNamespace)),o.relatedElements[o.currentImageIndex].dispatchEvent(new Event((t===1?"nextDone":"prevDone")+"."+o.eventNamespace))),o.options.history&&o.updateURL(),o.loadedImages.indexOf(o.currentImage.getAttribute("src"))===-1&&o.loadedImages.push(o.currentImage.getAttribute("src"));var c=h.target.width,f=h.target.height;if(o.options.scaleImageToRatio||c>r||f>l){var u=c/f>r/l?c/r:f/l;c/=u,f/=u}o.domNodes.image.style.top=(window.innerHeight-f)/2+"px",o.domNodes.image.style.left=(window.innerWidth-c-o.globalScrollbarWidth)/2+"px",o.domNodes.image.style.width=c+"px",o.domNodes.image.style.height=f+"px",o.domNodes.spinner.style.display="none",o.options.focus&&o.forceFocus(),o.fadeIn(o.currentImage,o.options.fadeSpeed,function(){o.options.focus&&o.domNodes.wrapper.focus()}),o.isOpen=!0;var w,E;typeof o.options.captionSelector=="string"?w=o.options.captionSelector==="self"?o.relatedElements[o.currentImageIndex]:o.getCaptionElement(o.relatedElements[o.currentImageIndex]):typeof o.options.captionSelector=="function"&&(w=o.options.captionSelector(o.relatedElements[o.currentImageIndex])),o.options.captions&&w&&(o.options.captionType==="data"?E=w.dataset[o.options.captionsData]:o.options.captionType==="text"?E=w.innerHTML:E=w.getAttribute(o.options.captionsData)),o.options.loop?o.relatedElements.length===1?o.hide(o.domNodes.navigation.querySelectorAll(".sl-prev, .sl-next")):o.show(o.domNodes.navigation.querySelectorAll(".sl-prev, .sl-next")):(o.currentImageIndex===0&&o.hide(o.domNodes.navigation.querySelector(".sl-prev")),o.currentImageIndex>=o.relatedElements.length-1&&o.hide(o.domNodes.navigation.querySelector(".sl-next")),o.currentImageIndex>0&&o.show(o.domNodes.navigation.querySelector(".sl-prev")),o.currentImageIndex<o.relatedElements.length-1&&o.show(o.domNodes.navigation.querySelector(".sl-next"))),t===1||t===-1?(o.options.animationSlide&&(o.slide(0,100*t+"px"),setTimeout(function(){o.slide(o.options.animationSpeed/1e3,0+"px")},50)),o.fadeIn(o.domNodes.image,o.options.fadeSpeed,function(){o.isAnimating=!1,o.setCaption(E,c)})):(o.isAnimating=!1,o.setCaption(E,c)),o.options.additionalHtml&&!o.domNodes.additionalHtml&&(o.domNodes.additionalHtml=document.createElement("div"),o.domNodes.additionalHtml.classList.add("sl-additional-html"),o.domNodes.additionalHtml.innerHTML=o.options.additionalHtml,o.domNodes.image.appendChild(o.domNodes.additionalHtml)),o.options.download&&o.domNodes.downloadLink.setAttribute("href",o.currentImage.getAttribute("src"))})}},{key:"zoomPanElement",value:function(t,o,s){this.currentImage.style[this.transitionPrefix+"transform"]="translate("+t+","+o+") scale("+s+")"}},{key:"minMax",value:function(t,o,s){return t<o?o:t>s?s:t}},{key:"setZoomData",value:function(t,o,s){this.currentImage.dataset.scale=t,this.currentImage.dataset.translateX=o,this.currentImage.dataset.translateY=s}},{key:"hashchangeHandler",value:function(){this.isOpen&&this.hash===this.initialLocationHash&&(this.hashReseted=!0,this.close())}},{key:"addEvents",value:function(){var t=this;if(this.addEventListener(window,"resize."+this.eventNamespace,function(s){t.isOpen&&t.adjustImage()}),this.addEventListener(this.domNodes.closeButton,["click."+this.eventNamespace,"touchstart."+this.eventNamespace],this.close.bind(this)),this.options.history&&setTimeout(function(){t.addEventListener(window,"hashchange."+t.eventNamespace,function(s){t.isOpen&&t.hashchangeHandler()})},40),this.addEventListener(this.domNodes.navigation.getElementsByTagName("button"),"click."+this.eventNamespace,function(s){if(!s.currentTarget.tagName.match(/button/i))return!0;s.preventDefault(),t.controlCoordinates.swipeDiff=0,t.loadImage(s.currentTarget.classList.contains("sl-next")?1:-1)}),this.options.scrollZoom){var o=1;this.addEventListener(this.domNodes.image,["mousewheel","DOMMouseScroll"],function(s){if(t.controlCoordinates.mousedown||t.isAnimating||t.isClosing||!t.isOpen)return!0;t.controlCoordinates.containerHeight==0&&(t.controlCoordinates.containerHeight=t.getDimensions(t.domNodes.image).height,t.controlCoordinates.containerWidth=t.getDimensions(t.domNodes.image).width,t.controlCoordinates.imgHeight=t.getDimensions(t.currentImage).height,t.controlCoordinates.imgWidth=t.getDimensions(t.currentImage).width,t.controlCoordinates.containerOffsetX=t.domNodes.image.offsetLeft,t.controlCoordinates.containerOffsetY=t.domNodes.image.offsetTop,t.controlCoordinates.initialOffsetX=parseFloat(t.currentImage.dataset.translateX),t.controlCoordinates.initialOffsetY=parseFloat(t.currentImage.dataset.translateY));var r=s.delta||s.wheelDelta;r===void 0&&(r=s.detail),r=Math.max(-1,Math.min(1,r)),o+=r*t.options.scrollZoomFactor*o,o=Math.max(1,Math.min(t.options.maxZoom,o)),t.controlCoordinates.targetScale=o;var l=document.documentElement.scrollTop||document.body.scrollTop;t.controlCoordinates.pinchOffsetX=s.pageX,t.controlCoordinates.pinchOffsetY=s.pageY-l||0,t.controlCoordinates.limitOffsetX=(t.controlCoordinates.imgWidth*t.controlCoordinates.targetScale-t.controlCoordinates.containerWidth)/2,t.controlCoordinates.limitOffsetY=(t.controlCoordinates.imgHeight*t.controlCoordinates.targetScale-t.controlCoordinates.containerHeight)/2,t.controlCoordinates.scaleDifference=t.controlCoordinates.targetScale-t.controlCoordinates.initialScale,t.controlCoordinates.targetOffsetX=t.controlCoordinates.imgWidth*t.controlCoordinates.targetScale<=t.controlCoordinates.containerWidth?0:t.minMax(t.controlCoordinates.initialOffsetX-(t.controlCoordinates.pinchOffsetX-t.controlCoordinates.containerOffsetX-t.controlCoordinates.containerWidth/2-t.controlCoordinates.initialOffsetX)/(t.controlCoordinates.targetScale-t.controlCoordinates.scaleDifference)*t.controlCoordinates.scaleDifference,t.controlCoordinates.limitOffsetX*-1,t.controlCoordinates.limitOffsetX),t.controlCoordinates.targetOffsetY=t.controlCoordinates.imgHeight*t.controlCoordinates.targetScale<=t.controlCoordinates.containerHeight?0:t.minMax(t.controlCoordinates.initialOffsetY-(t.controlCoordinates.pinchOffsetY-t.controlCoordinates.containerOffsetY-t.controlCoordinates.containerHeight/2-t.controlCoordinates.initialOffsetY)/(t.controlCoordinates.targetScale-t.controlCoordinates.scaleDifference)*t.controlCoordinates.scaleDifference,t.controlCoordinates.limitOffsetY*-1,t.controlCoordinates.limitOffsetY),t.zoomPanElement(t.controlCoordinates.targetOffsetX+"px",t.controlCoordinates.targetOffsetY+"px",t.controlCoordinates.targetScale),t.controlCoordinates.targetScale>1?(t.controlCoordinates.zoomed=!0,(!t.domNodes.caption.style.opacity||t.domNodes.caption.style.opacity>0)&&t.domNodes.caption.style.display!=="none"&&t.fadeOut(t.domNodes.caption,t.options.fadeSpeed)):(t.controlCoordinates.initialScale===1&&(t.controlCoordinates.zoomed=!1,t.domNodes.caption.style.display==="none"&&t.fadeIn(t.domNodes.caption,t.options.fadeSpeed)),t.controlCoordinates.initialPinchDistance=null,t.controlCoordinates.capture=!1),t.controlCoordinates.initialPinchDistance=t.controlCoordinates.targetPinchDistance,t.controlCoordinates.initialScale=t.controlCoordinates.targetScale,t.controlCoordinates.initialOffsetX=t.controlCoordinates.targetOffsetX,t.controlCoordinates.initialOffsetY=t.controlCoordinates.targetOffsetY,t.setZoomData(t.controlCoordinates.targetScale,t.controlCoordinates.targetOffsetX,t.controlCoordinates.targetOffsetY),t.zoomPanElement(t.controlCoordinates.targetOffsetX+"px",t.controlCoordinates.targetOffsetY+"px",t.controlCoordinates.targetScale)})}this.addEventListener(this.domNodes.image,["touchstart."+this.eventNamespace,"mousedown."+this.eventNamespace],function(s){if(s.target.tagName==="A"&&s.type==="touchstart")return!0;if(s.type==="mousedown")s.preventDefault(),t.controlCoordinates.initialPointerOffsetX=s.clientX,t.controlCoordinates.initialPointerOffsetY=s.clientY,t.controlCoordinates.containerHeight=t.getDimensions(t.domNodes.image).height,t.controlCoordinates.containerWidth=t.getDimensions(t.domNodes.image).width,t.controlCoordinates.imgHeight=t.getDimensions(t.currentImage).height,t.controlCoordinates.imgWidth=t.getDimensions(t.currentImage).width,t.controlCoordinates.containerOffsetX=t.domNodes.image.offsetLeft,t.controlCoordinates.containerOffsetY=t.domNodes.image.offsetTop,t.controlCoordinates.initialOffsetX=parseFloat(t.currentImage.dataset.translateX),t.controlCoordinates.initialOffsetY=parseFloat(t.currentImage.dataset.translateY),t.controlCoordinates.capture=!0;else{if(t.controlCoordinates.touchCount=s.touches.length,t.controlCoordinates.initialPointerOffsetX=s.touches[0].clientX,t.controlCoordinates.initialPointerOffsetY=s.touches[0].clientY,t.controlCoordinates.containerHeight=t.getDimensions(t.domNodes.image).height,t.controlCoordinates.containerWidth=t.getDimensions(t.domNodes.image).width,t.controlCoordinates.imgHeight=t.getDimensions(t.currentImage).height,t.controlCoordinates.imgWidth=t.getDimensions(t.currentImage).width,t.controlCoordinates.containerOffsetX=t.domNodes.image.offsetLeft,t.controlCoordinates.containerOffsetY=t.domNodes.image.offsetTop,t.controlCoordinates.touchCount===1){if(!t.controlCoordinates.doubleTapped)t.controlCoordinates.doubleTapped=!0,setTimeout(function(){t.controlCoordinates.doubleTapped=!1},300);else return t.currentImage.classList.add("sl-transition"),t.controlCoordinates.zoomed?(t.controlCoordinates.initialScale=1,t.setZoomData(t.controlCoordinates.initialScale,0,0),t.zoomPanElement(0+"px",0+"px",t.controlCoordinates.initialScale),t.controlCoordinates.zoomed=!1):(t.controlCoordinates.initialScale=t.options.doubleTapZoom,t.setZoomData(t.controlCoordinates.initialScale,0,0),t.zoomPanElement(0+"px",0+"px",t.controlCoordinates.initialScale),(!t.domNodes.caption.style.opacity||t.domNodes.caption.style.opacity>0)&&t.domNodes.caption.style.display!=="none"&&t.fadeOut(t.domNodes.caption,t.options.fadeSpeed),t.controlCoordinates.zoomed=!0),setTimeout(function(){t.currentImage&&t.currentImage.classList.remove("sl-transition")},200),!1;t.controlCoordinates.initialOffsetX=parseFloat(t.currentImage.dataset.translateX),t.controlCoordinates.initialOffsetY=parseFloat(t.currentImage.dataset.translateY)}else t.controlCoordinates.touchCount===2&&(t.controlCoordinates.initialPointerOffsetX2=s.touches[1].clientX,t.controlCoordinates.initialPointerOffsetY2=s.touches[1].clientY,t.controlCoordinates.initialOffsetX=parseFloat(t.currentImage.dataset.translateX),t.controlCoordinates.initialOffsetY=parseFloat(t.currentImage.dataset.translateY),t.controlCoordinates.pinchOffsetX=(t.controlCoordinates.initialPointerOffsetX+t.controlCoordinates.initialPointerOffsetX2)/2,t.controlCoordinates.pinchOffsetY=(t.controlCoordinates.initialPointerOffsetY+t.controlCoordinates.initialPointerOffsetY2)/2,t.controlCoordinates.initialPinchDistance=Math.sqrt((t.controlCoordinates.initialPointerOffsetX-t.controlCoordinates.initialPointerOffsetX2)*(t.controlCoordinates.initialPointerOffsetX-t.controlCoordinates.initialPointerOffsetX2)+(t.controlCoordinates.initialPointerOffsetY-t.controlCoordinates.initialPointerOffsetY2)*(t.controlCoordinates.initialPointerOffsetY-t.controlCoordinates.initialPointerOffsetY2)));t.controlCoordinates.capture=!0}return t.controlCoordinates.mousedown?!0:(t.transitionCapable&&(t.controlCoordinates.imageLeft=parseInt(t.domNodes.image.style.left,10)),t.controlCoordinates.mousedown=!0,t.controlCoordinates.swipeDiff=0,t.controlCoordinates.swipeYDiff=0,t.controlCoordinates.swipeStart=s.pageX||s.touches[0].pageX,t.controlCoordinates.swipeYStart=s.pageY||s.touches[0].pageY,!1)}),this.addEventListener(this.domNodes.image,["touchmove."+this.eventNamespace,"mousemove."+this.eventNamespace,"MSPointerMove"],function(s){if(!t.controlCoordinates.mousedown)return!0;if(s.type==="touchmove"){if(t.controlCoordinates.capture===!1)return!1;t.controlCoordinates.pointerOffsetX=s.touches[0].clientX,t.controlCoordinates.pointerOffsetY=s.touches[0].clientY,t.controlCoordinates.touchCount=s.touches.length,t.controlCoordinates.touchmoveCount++,t.controlCoordinates.touchCount>1?(t.controlCoordinates.pointerOffsetX2=s.touches[1].clientX,t.controlCoordinates.pointerOffsetY2=s.touches[1].clientY,t.controlCoordinates.targetPinchDistance=Math.sqrt((t.controlCoordinates.pointerOffsetX-t.controlCoordinates.pointerOffsetX2)*(t.controlCoordinates.pointerOffsetX-t.controlCoordinates.pointerOffsetX2)+(t.controlCoordinates.pointerOffsetY-t.controlCoordinates.pointerOffsetY2)*(t.controlCoordinates.pointerOffsetY-t.controlCoordinates.pointerOffsetY2)),t.controlCoordinates.initialPinchDistance===null&&(t.controlCoordinates.initialPinchDistance=t.controlCoordinates.targetPinchDistance),Math.abs(t.controlCoordinates.initialPinchDistance-t.controlCoordinates.targetPinchDistance)>=1&&(t.controlCoordinates.targetScale=t.minMax(t.controlCoordinates.targetPinchDistance/t.controlCoordinates.initialPinchDistance*t.controlCoordinates.initialScale,1,t.options.maxZoom),t.controlCoordinates.limitOffsetX=(t.controlCoordinates.imgWidth*t.controlCoordinates.targetScale-t.controlCoordinates.containerWidth)/2,t.controlCoordinates.limitOffsetY=(t.controlCoordinates.imgHeight*t.controlCoordinates.targetScale-t.controlCoordinates.containerHeight)/2,t.controlCoordinates.scaleDifference=t.controlCoordinates.targetScale-t.controlCoordinates.initialScale,t.controlCoordinates.targetOffsetX=t.controlCoordinates.imgWidth*t.controlCoordinates.targetScale<=t.controlCoordinates.containerWidth?0:t.minMax(t.controlCoordinates.initialOffsetX-(t.controlCoordinates.pinchOffsetX-t.controlCoordinates.containerOffsetX-t.controlCoordinates.containerWidth/2-t.controlCoordinates.initialOffsetX)/(t.controlCoordinates.targetScale-t.controlCoordinates.scaleDifference)*t.controlCoordinates.scaleDifference,t.controlCoordinates.limitOffsetX*-1,t.controlCoordinates.limitOffsetX),t.controlCoordinates.targetOffsetY=t.controlCoordinates.imgHeight*t.controlCoordinates.targetScale<=t.controlCoordinates.containerHeight?0:t.minMax(t.controlCoordinates.initialOffsetY-(t.controlCoordinates.pinchOffsetY-t.controlCoordinates.containerOffsetY-t.controlCoordinates.containerHeight/2-t.controlCoordinates.initialOffsetY)/(t.controlCoordinates.targetScale-t.controlCoordinates.scaleDifference)*t.controlCoordinates.scaleDifference,t.controlCoordinates.limitOffsetY*-1,t.controlCoordinates.limitOffsetY),t.zoomPanElement(t.controlCoordinates.targetOffsetX+"px",t.controlCoordinates.targetOffsetY+"px",t.controlCoordinates.targetScale),t.controlCoordinates.targetScale>1&&(t.controlCoordinates.zoomed=!0,(!t.domNodes.caption.style.opacity||t.domNodes.caption.style.opacity>0)&&t.domNodes.caption.style.display!=="none"&&t.fadeOut(t.domNodes.caption,t.options.fadeSpeed)),t.controlCoordinates.initialPinchDistance=t.controlCoordinates.targetPinchDistance,t.controlCoordinates.initialScale=t.controlCoordinates.targetScale,t.controlCoordinates.initialOffsetX=t.controlCoordinates.targetOffsetX,t.controlCoordinates.initialOffsetY=t.controlCoordinates.targetOffsetY)):(t.controlCoordinates.targetScale=t.controlCoordinates.initialScale,t.controlCoordinates.limitOffsetX=(t.controlCoordinates.imgWidth*t.controlCoordinates.targetScale-t.controlCoordinates.containerWidth)/2,t.controlCoordinates.limitOffsetY=(t.controlCoordinates.imgHeight*t.controlCoordinates.targetScale-t.controlCoordinates.containerHeight)/2,t.controlCoordinates.targetOffsetX=t.controlCoordinates.imgWidth*t.controlCoordinates.targetScale<=t.controlCoordinates.containerWidth?0:t.minMax(t.controlCoordinates.pointerOffsetX-(t.controlCoordinates.initialPointerOffsetX-t.controlCoordinates.initialOffsetX),t.controlCoordinates.limitOffsetX*-1,t.controlCoordinates.limitOffsetX),t.controlCoordinates.targetOffsetY=t.controlCoordinates.imgHeight*t.controlCoordinates.targetScale<=t.controlCoordinates.containerHeight?0:t.minMax(t.controlCoordinates.pointerOffsetY-(t.controlCoordinates.initialPointerOffsetY-t.controlCoordinates.initialOffsetY),t.controlCoordinates.limitOffsetY*-1,t.controlCoordinates.limitOffsetY),Math.abs(t.controlCoordinates.targetOffsetX)===Math.abs(t.controlCoordinates.limitOffsetX)&&(t.controlCoordinates.initialOffsetX=t.controlCoordinates.targetOffsetX,t.controlCoordinates.initialPointerOffsetX=t.controlCoordinates.pointerOffsetX),Math.abs(t.controlCoordinates.targetOffsetY)===Math.abs(t.controlCoordinates.limitOffsetY)&&(t.controlCoordinates.initialOffsetY=t.controlCoordinates.targetOffsetY,t.controlCoordinates.initialPointerOffsetY=t.controlCoordinates.pointerOffsetY),t.setZoomData(t.controlCoordinates.initialScale,t.controlCoordinates.targetOffsetX,t.controlCoordinates.targetOffsetY),t.zoomPanElement(t.controlCoordinates.targetOffsetX+"px",t.controlCoordinates.targetOffsetY+"px",t.controlCoordinates.targetScale))}if(s.type==="mousemove"&&t.controlCoordinates.mousedown){if(s.type=="touchmove")return!0;if(s.preventDefault(),t.controlCoordinates.capture===!1)return!1;t.controlCoordinates.pointerOffsetX=s.clientX,t.controlCoordinates.pointerOffsetY=s.clientY,t.controlCoordinates.targetScale=t.controlCoordinates.initialScale,t.controlCoordinates.limitOffsetX=(t.controlCoordinates.imgWidth*t.controlCoordinates.targetScale-t.controlCoordinates.containerWidth)/2,t.controlCoordinates.limitOffsetY=(t.controlCoordinates.imgHeight*t.controlCoordinates.targetScale-t.controlCoordinates.containerHeight)/2,t.controlCoordinates.targetOffsetX=t.controlCoordinates.imgWidth*t.controlCoordinates.targetScale<=t.controlCoordinates.containerWidth?0:t.minMax(t.controlCoordinates.pointerOffsetX-(t.controlCoordinates.initialPointerOffsetX-t.controlCoordinates.initialOffsetX),t.controlCoordinates.limitOffsetX*-1,t.controlCoordinates.limitOffsetX),t.controlCoordinates.targetOffsetY=t.controlCoordinates.imgHeight*t.controlCoordinates.targetScale<=t.controlCoordinates.containerHeight?0:t.minMax(t.controlCoordinates.pointerOffsetY-(t.controlCoordinates.initialPointerOffsetY-t.controlCoordinates.initialOffsetY),t.controlCoordinates.limitOffsetY*-1,t.controlCoordinates.limitOffsetY),Math.abs(t.controlCoordinates.targetOffsetX)===Math.abs(t.controlCoordinates.limitOffsetX)&&(t.controlCoordinates.initialOffsetX=t.controlCoordinates.targetOffsetX,t.controlCoordinates.initialPointerOffsetX=t.controlCoordinates.pointerOffsetX),Math.abs(t.controlCoordinates.targetOffsetY)===Math.abs(t.controlCoordinates.limitOffsetY)&&(t.controlCoordinates.initialOffsetY=t.controlCoordinates.targetOffsetY,t.controlCoordinates.initialPointerOffsetY=t.controlCoordinates.pointerOffsetY),t.setZoomData(t.controlCoordinates.initialScale,t.controlCoordinates.targetOffsetX,t.controlCoordinates.targetOffsetY),t.zoomPanElement(t.controlCoordinates.targetOffsetX+"px",t.controlCoordinates.targetOffsetY+"px",t.controlCoordinates.targetScale)}t.controlCoordinates.zoomed||(t.controlCoordinates.swipeEnd=s.pageX||s.touches[0].pageX,t.controlCoordinates.swipeYEnd=s.pageY||s.touches[0].pageY,t.controlCoordinates.swipeDiff=t.controlCoordinates.swipeStart-t.controlCoordinates.swipeEnd,t.controlCoordinates.swipeYDiff=t.controlCoordinates.swipeYStart-t.controlCoordinates.swipeYEnd,t.options.animationSlide&&t.slide(0,-t.controlCoordinates.swipeDiff+"px"))}),this.addEventListener(this.domNodes.image,["touchend."+this.eventNamespace,"mouseup."+this.eventNamespace,"touchcancel."+this.eventNamespace,"mouseleave."+this.eventNamespace,"pointerup","pointercancel","MSPointerUp","MSPointerCancel"],function(s){if(t.isTouchDevice&&s.type==="touchend"&&(t.controlCoordinates.touchCount=s.touches.length,t.controlCoordinates.touchCount===0?(t.currentImage&&t.setZoomData(t.controlCoordinates.initialScale,t.controlCoordinates.targetOffsetX,t.controlCoordinates.targetOffsetY),t.controlCoordinates.initialScale===1&&(t.controlCoordinates.zoomed=!1,t.domNodes.caption.style.display==="none"&&t.fadeIn(t.domNodes.caption,t.options.fadeSpeed)),t.controlCoordinates.initialPinchDistance=null,t.controlCoordinates.capture=!1):t.controlCoordinates.touchCount===1?(t.controlCoordinates.initialPointerOffsetX=s.touches[0].clientX,t.controlCoordinates.initialPointerOffsetY=s.touches[0].clientY):t.controlCoordinates.touchCount>1&&(t.controlCoordinates.initialPinchDistance=null)),t.controlCoordinates.mousedown){t.controlCoordinates.mousedown=!1;var r=!0;t.options.loop||(t.currentImageIndex===0&&t.controlCoordinates.swipeDiff<0&&(r=!1),t.currentImageIndex>=t.relatedElements.length-1&&t.controlCoordinates.swipeDiff>0&&(r=!1)),Math.abs(t.controlCoordinates.swipeDiff)>t.options.swipeTolerance&&r?t.loadImage(t.controlCoordinates.swipeDiff>0?1:-1):t.options.animationSlide&&t.slide(t.options.animationSpeed/1e3,0+"px"),t.options.swipeClose&&Math.abs(t.controlCoordinates.swipeYDiff)>50&&Math.abs(t.controlCoordinates.swipeDiff)<t.options.swipeTolerance&&t.close()}}),this.addEventListener(this.domNodes.image,["dblclick"],function(s){if(!t.isTouchDevice)return t.controlCoordinates.initialPointerOffsetX=s.clientX,t.controlCoordinates.initialPointerOffsetY=s.clientY,t.controlCoordinates.containerHeight=t.getDimensions(t.domNodes.image).height,t.controlCoordinates.containerWidth=t.getDimensions(t.domNodes.image).width,t.controlCoordinates.imgHeight=t.getDimensions(t.currentImage).height,t.controlCoordinates.imgWidth=t.getDimensions(t.currentImage).width,t.controlCoordinates.containerOffsetX=t.domNodes.image.offsetLeft,t.controlCoordinates.containerOffsetY=t.domNodes.image.offsetTop,t.currentImage.classList.add("sl-transition"),t.controlCoordinates.zoomed?(t.controlCoordinates.initialScale=1,t.setZoomData(t.controlCoordinates.initialScale,0,0),t.zoomPanElement(0+"px",0+"px",t.controlCoordinates.initialScale),t.controlCoordinates.zoomed=!1,t.domNodes.caption.style.display==="none"&&t.fadeIn(t.domNodes.caption,t.options.fadeSpeed)):(t.controlCoordinates.initialScale=t.options.doubleTapZoom,t.setZoomData(t.controlCoordinates.initialScale,0,0),t.zoomPanElement(0+"px",0+"px",t.controlCoordinates.initialScale),(!t.domNodes.caption.style.opacity||t.domNodes.caption.style.opacity>0)&&t.domNodes.caption.style.display!=="none"&&t.fadeOut(t.domNodes.caption,t.options.fadeSpeed),t.controlCoordinates.zoomed=!0),setTimeout(function(){t.currentImage&&(t.currentImage.classList.remove("sl-transition"),t.currentImage.style[t.transitionPrefix+"transform-origin"]=null)},200),t.controlCoordinates.capture=!0,!1})}},{key:"getDimensions",value:function(t){var o=window.getComputedStyle(t),s=t.offsetHeight,r=t.offsetWidth,l=parseFloat(o.borderTopWidth),h=parseFloat(o.borderBottomWidth),c=parseFloat(o.paddingTop),f=parseFloat(o.paddingBottom),u=parseFloat(o.borderLeftWidth),w=parseFloat(o.borderRightWidth),E=parseFloat(o.paddingLeft),Y=parseFloat(o.paddingRight);return{height:s-h-l-c-f,width:r-u-w-E-Y}}},{key:"updateHash",value:function(){var t="pid="+(this.currentImageIndex+1),o=window.location.href.split("#")[0]+"#"+t;this.hashReseted=!1,this.pushStateSupport?window.history[this.historyHasChanges?"replaceState":"pushState"]("",document.title,o):this.historyHasChanges?window.location.replace(o):window.location.hash=t,this.historyHasChanges||(this.urlChangedOnce=!0),this.historyHasChanges=!0}},{key:"resetHash",value:function(){this.hashReseted=!0,this.urlChangedOnce?history.back():this.pushStateSupport?history.pushState("",document.title,window.location.pathname+window.location.search):window.location.hash="",clearTimeout(this.historyUpdateTimeout)}},{key:"updateURL",value:function(){clearTimeout(this.historyUpdateTimeout),this.historyHasChanges?this.historyUpdateTimeout=setTimeout(this.updateHash.bind(this),800):this.updateHash()}},{key:"setCaption",value:function(t,o,s){var r=this;if(this.options.captions&&t&&t!==""&&typeof t<"u"){var l,h=!((l=s??this.options.captionHTML)!==null&&l!==void 0)||l?"innerHTML":"innerText";this.hide(this.domNodes.caption),this.domNodes.caption.style.width=o+"px",this.domNodes.caption[h]=t,this.domNodes.image.appendChild(this.domNodes.caption),setTimeout(function(){r.fadeIn(r.domNodes.caption,r.options.fadeSpeed)},this.options.captionDelay)}}},{key:"slide",value:function(t,o){if(!this.transitionCapable)return this.domNodes.image.style.left=o;this.domNodes.image.style[this.transitionPrefix+"transform"]="translateX("+o+")",this.domNodes.image.style[this.transitionPrefix+"transition"]=this.transitionPrefix+"transform "+t+"s linear"}},{key:"getRelated",value:function(t){var o;return t&&t!==!1&&t!=="nofollow"?o=Array.from(this.elements).filter(function(s){return s.getAttribute("rel")===t}):o=this.elements,o}},{key:"openImage",value:function(t){var o=this;t.dispatchEvent(new Event("show."+this.eventNamespace)),this.globalScrollbarWidth=this.getScrollbarWidth(),this.options.disableScroll&&(this.toggleScrollbar("hide"),this.globalScrollbarWidth=0),this.options.htmlClass&&this.options.htmlClass!==""&&document.querySelector("html").classList.add(this.options.htmlClass),document.body.appendChild(this.domNodes.wrapper),this.domNodes.wrapper.appendChild(this.domNodes.image),this.options.overlay&&document.body.appendChild(this.domNodes.overlay),this.relatedElements=this.getRelated(t.rel),this.options.showCounter&&(this.relatedElements.length==1&&this.domNodes.wrapper.contains(this.domNodes.counter)?this.domNodes.wrapper.removeChild(this.domNodes.counter):this.relatedElements.length>1&&!this.domNodes.wrapper.contains(this.domNodes.counter)&&this.domNodes.wrapper.appendChild(this.domNodes.counter)),this.options.download&&this.domNodes.download&&this.domNodes.wrapper.appendChild(this.domNodes.download),this.isAnimating=!0,this.currentImageIndex=this.relatedElements.indexOf(t);var s=t.getAttribute(this.options.sourceAttr);this.currentImage=document.createElement("img"),this.currentImage.style.display="none",this.currentImage.setAttribute("src",s),this.currentImage.dataset.scale=1,this.currentImage.dataset.translateX=0,this.currentImage.dataset.translateY=0,this.loadedImages.indexOf(s)===-1&&this.loadedImages.push(s),this.domNodes.image.innerHTML="",this.domNodes.image.setAttribute("style",""),this.domNodes.image.appendChild(this.currentImage),this.fadeIn(this.domNodes.overlay,this.options.fadeSpeed),this.fadeIn([this.domNodes.counter,this.domNodes.navigation,this.domNodes.closeButton,this.domNodes.download],this.options.fadeSpeed),this.show(this.domNodes.spinner),this.domNodes.counter.querySelector(".sl-current").innerHTML=this.currentImageIndex+1,this.domNodes.counter.querySelector(".sl-total").innerHTML=this.relatedElements.length,this.adjustImage(),this.options.preloading&&this.preload(),setTimeout(function(){t.dispatchEvent(new Event("shown."+o.eventNamespace))},this.options.animationSpeed)}},{key:"forceFocus",value:function(){var t=this;this.removeEventListener(document,"focusin."+this.eventNamespace),this.addEventListener(document,"focusin."+this.eventNamespace,function(o){document!==o.target&&t.domNodes.wrapper!==o.target&&!t.domNodes.wrapper.contains(o.target)&&t.domNodes.wrapper.focus()})}},{key:"addEventListener",value:function(t,o,s,r){t=this.wrap(t),o=this.wrap(o);var l=a(t),h;try{for(l.s();!(h=l.n()).done;){var c=h.value;c.namespaces||(c.namespaces={});var f=a(o),u;try{for(f.s();!(u=f.n()).done;){var w=u.value,E=r||!1,Y=["touchstart","touchmove","mousewheel","DOMMouseScroll"].indexOf(w.split(".")[0])>=0;Y&&this.isPassiveEventsSupported&&(n(E)==="object"?E.passive=!0:E={passive:!0}),c.namespaces[w]=s,c.addEventListener(w.split(".")[0],s,E)}}catch(X){f.e(X)}finally{f.f()}}}catch(X){l.e(X)}finally{l.f()}}},{key:"removeEventListener",value:function(t,o){t=this.wrap(t),o=this.wrap(o);var s=a(t),r;try{for(s.s();!(r=s.n()).done;){var l=r.value,h=a(o),c;try{for(h.s();!(c=h.n()).done;){var f=c.value;l.namespaces&&l.namespaces[f]&&(l.removeEventListener(f.split(".")[0],l.namespaces[f]),delete l.namespaces[f])}}catch(u){h.e(u)}finally{h.f()}}}catch(u){s.e(u)}finally{s.f()}}},{key:"fadeOut",value:function(t,o,s){var r=this;t=this.wrap(t);var l=a(t),h;try{for(l.s();!(h=l.n()).done;){var c=h.value;c.style.opacity=parseFloat(c)||window.getComputedStyle(c).getPropertyValue("opacity")}}catch(w){l.e(w)}finally{l.f()}this.isFadeIn=!1;var f=16.66666/(o||this.options.fadeSpeed),u=function w(){var E=parseFloat(t[0].style.opacity);if((E-=f)<0){var Y=a(t),X;try{for(Y.s();!(X=Y.n()).done;){var L=X.value;L.style.display="none",L.style.opacity=1}}catch(H){Y.e(H)}finally{Y.f()}s&&s.call(r,t)}else{var D=a(t),T;try{for(D.s();!(T=D.n()).done;){var P=T.value;P.style.opacity=E}}catch(H){D.e(H)}finally{D.f()}requestAnimationFrame(w)}};u()}},{key:"fadeIn",value:function(t,o,s,r){var l=this;t=this.wrap(t);var h=a(t),c;try{for(h.s();!(c=h.n()).done;){var f=c.value;f&&(f.style.opacity=0,f.style.display=r||"block")}}catch(Y){h.e(Y)}finally{h.f()}this.isFadeIn=!0;var u=parseFloat(t[0].dataset.opacityTarget||1),w=16.66666*u/(o||this.options.fadeSpeed),E=function Y(){var X=parseFloat(t[0].style.opacity);if((X+=w)>u){var P=a(t),H;try{for(P.s();!(H=P.n()).done;){var R=H.value;R&&(R.style.opacity=u)}}catch(M){P.e(M)}finally{P.f()}s&&s.call(l,t)}else{var L=a(t),D;try{for(L.s();!(D=L.n()).done;){var T=D.value;T&&(T.style.opacity=X)}}catch(M){L.e(M)}finally{L.f()}if(!l.isFadeIn)return;requestAnimationFrame(Y)}};E()}},{key:"hide",value:function(t){t=this.wrap(t);var o=a(t),s;try{for(o.s();!(s=o.n()).done;){var r=s.value;r.style.display!="none"&&(r.dataset.initialDisplay=r.style.display),r.style.display="none"}}catch(l){o.e(l)}finally{o.f()}}},{key:"show",value:function(t,o){t=this.wrap(t);var s=a(t),r;try{for(s.s();!(r=s.n()).done;){var l=r.value;l.style.display=l.dataset.initialDisplay||o||"block"}}catch(h){s.e(h)}finally{s.f()}}},{key:"wrap",value:function(t){return typeof t[Symbol.iterator]=="function"&&typeof t!="string"?t:[t]}},{key:"on",value:function(t,o){t=this.wrap(t);var s=a(this.elements),r;try{for(s.s();!(r=s.n()).done;){var l=r.value;l.fullyNamespacedEvents||(l.fullyNamespacedEvents={});var h=a(t),c;try{for(h.s();!(c=h.n()).done;){var f=c.value;l.fullyNamespacedEvents[f]=o,l.addEventListener(f,o)}}catch(u){h.e(u)}finally{h.f()}}}catch(u){s.e(u)}finally{s.f()}return this}},{key:"off",value:function(t){t=this.wrap(t);var o=a(this.elements),s;try{for(o.s();!(s=o.n()).done;){var r=s.value,l=a(t),h;try{for(l.s();!(h=l.n()).done;){var c=h.value;typeof r.fullyNamespacedEvents<"u"&&c in r.fullyNamespacedEvents&&r.removeEventListener(c,r.fullyNamespacedEvents[c])}}catch(f){l.e(f)}finally{l.f()}}}catch(f){o.e(f)}finally{o.f()}return this}},{key:"open",value:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;t=t||this.elements[0],typeof jQuery<"u"&&t instanceof jQuery&&(t=t.get(0)),o>0&&(t=this.elements[o]),this.initialImageIndex=this.elements.indexOf(t),this.initialImageIndex>-1&&this.openImage(t)}},{key:"openPosition",value:function(t){var o=this.elements[t];this.open(o,t)}},{key:"next",value:function(){this.loadImage(1)}},{key:"prev",value:function(){this.loadImage(-1)}},{key:"getLighboxData",value:function(){return{currentImageIndex:this.currentImageIndex,currentImage:this.currentImage,globalScrollbarWidth:this.globalScrollbarWidth}}},{key:"destroy",value:function(){this.off(["close."+this.eventNamespace,"closed."+this.eventNamespace,"nextImageLoaded."+this.eventNamespace,"prevImageLoaded."+this.eventNamespace,"change."+this.eventNamespace,"nextDone."+this.eventNamespace,"prevDone."+this.eventNamespace,"error."+this.eventNamespace,"changed."+this.eventNamespace,"next."+this.eventNamespace,"prev."+this.eventNamespace,"show."+this.eventNamespace,"shown."+this.eventNamespace]),this.removeEventListener(this.elements,"click."+this.eventNamespace),this.removeEventListener(document,"focusin."+this.eventNamespace),this.removeEventListener(document.body,"contextmenu."+this.eventNamespace),this.removeEventListener(document.body,"keyup."+this.eventNamespace),this.removeEventListener(this.domNodes.navigation.getElementsByTagName("button"),"click."+this.eventNamespace),this.removeEventListener(this.domNodes.closeButton,"click."+this.eventNamespace),this.removeEventListener(window,"resize."+this.eventNamespace),this.removeEventListener(window,"hashchange."+this.eventNamespace),this.close(),this.isOpen&&(document.body.removeChild(this.domNodes.wrapper),document.body.removeChild(this.domNodes.overlay)),this.elements=null}},{key:"refresh",value:function(){if(!this.initialSelector)throw"refreshing only works when you initialize using a selector!";var t=this.options,o=this.initialSelector;return this.destroy(),this.constructor(o,t),this}}]),i}(),I=N;x.default=I,W.SimpleLightbox=N})(F);const U=Z(F);function k(x){throw new Error('Could not dynamically require "'+x+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var $={};(function x(n,a,d){function g(v,y){if(!a[v]){if(!n[v]){var S=typeof k=="function"&&k;if(!y&&S)return S(v,!0);if(p)return p(v,!0);throw(y=new Error("Cannot find module '"+v+"'")).code="MODULE_NOT_FOUND",y}S=a[v]={exports:{}},n[v][0].call(S.exports,function(O){return g(n[v][1][O]||O)},S,S.exports,x,n,a,d)}return a[v].exports}for(var p=typeof k=="function"&&k,C=0;C<d.length;C++)g(d[C]);return g})({1:[function(x,n,a){(function(d){(function(){function g(m){return(g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N})(m)}function p(m,N){var I,i,e,t,o=typeof Symbol<"u"&&m[Symbol.iterator]||m["@@iterator"];if(o)return i=!(I=!0),{s:function(){o=o.call(m)},n:function(){var s=o.next();return I=s.done,s},e:function(s){i=!0,e=s},f:function(){try{I||o.return==null||o.return()}finally{if(i)throw e}}};if(Array.isArray(m)||(o=v(m))||N&&m&&typeof m.length=="number")return o&&(m=o),t=0,{s:N=function(){},n:function(){return t>=m.length?{done:!0}:{done:!1,value:m[t++]}},e:function(s){throw s},f:N};throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function C(m){return function(N){if(Array.isArray(N))return y(N)}(m)||function(N){if(typeof Symbol<"u"&&N[Symbol.iterator]!=null||N["@@iterator"]!=null)return Array.from(N)}(m)||v(m)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function v(m,N){var I;if(m)return typeof m=="string"?y(m,N):(I=(I=Object.prototype.toString.call(m).slice(8,-1))==="Object"&&m.constructor?m.constructor.name:I)==="Map"||I==="Set"?Array.from(m):I==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I)?y(m,N):void 0}function y(m,N){(N==null||N>m.length)&&(N=m.length);for(var I=0,i=new Array(N);I<N;I++)i[I]=m[I];return i}function S(m,N){for(var I=0;I<N.length;I++){var i=N[I];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(m,i.key,i)}}function O(m,N,I){N in m?Object.defineProperty(m,N,{value:I,enumerable:!0,configurable:!0,writable:!0}):m[N]=I}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var A=function(){function m(i,e){var t,o=this;if(!(this instanceof m))throw new TypeError("Cannot call a class as a function");O(this,"defaultOptions",{sourceAttr:"href",overlay:!0,overlayOpacity:.7,spinner:!0,nav:!0,navText:["&lsaquo;","&rsaquo;"],captions:!0,captionDelay:0,captionSelector:"img",captionType:"attr",captionsData:"title",captionPosition:"bottom",captionClass:"",captionHTML:!0,close:!0,closeText:"&times;",swipeClose:!0,showCounter:!0,fileExt:"png|jpg|jpeg|gif|webp",animationSlide:!0,animationSpeed:250,preloading:!0,enableKeyboard:!0,loop:!0,rel:!1,docClose:!0,swipeTolerance:50,className:"simple-lightbox",widthRatio:.8,heightRatio:.9,scaleImageToRatio:!1,disableRightClick:!1,disableScroll:!0,alertError:!0,alertErrorMessage:"Image not found, next image will be loaded",additionalHtml:!1,history:!0,throttleInterval:0,doubleTapZoom:2,maxZoom:10,htmlClass:"has-lightbox",rtl:!1,fixedClass:"sl-fixed",fadeSpeed:300,uniqueImages:!0,focus:!0,scrollZoom:!0,scrollZoomFactor:.5,download:!1}),O(this,"transitionPrefix",void 0),O(this,"isPassiveEventsSupported",void 0),O(this,"transitionCapable",!1),O(this,"isTouchDevice","ontouchstart"in window),O(this,"isAppleDevice",/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),O(this,"initialLocationHash",void 0),O(this,"pushStateSupport","pushState"in history),O(this,"isOpen",!1),O(this,"isAnimating",!1),O(this,"isClosing",!1),O(this,"isFadeIn",!1),O(this,"urlChangedOnce",!1),O(this,"hashReseted",!1),O(this,"historyHasChanges",!1),O(this,"historyUpdateTimeout",null),O(this,"currentImage",void 0),O(this,"eventNamespace","simplelightbox"),O(this,"domNodes",{}),O(this,"loadedImages",[]),O(this,"initialImageIndex",0),O(this,"currentImageIndex",0),O(this,"initialSelector",null),O(this,"globalScrollbarWidth",0),O(this,"controlCoordinates",{swipeDiff:0,swipeYDiff:0,swipeStart:0,swipeEnd:0,swipeYStart:0,swipeYEnd:0,mousedown:!1,imageLeft:0,zoomed:!1,containerHeight:0,containerWidth:0,containerOffsetX:0,containerOffsetY:0,imgHeight:0,imgWidth:0,capture:!1,initialOffsetX:0,initialOffsetY:0,initialPointerOffsetX:0,initialPointerOffsetY:0,initialPointerOffsetX2:0,initialPointerOffsetY2:0,initialScale:1,initialPinchDistance:0,pointerOffsetX:0,pointerOffsetY:0,pointerOffsetX2:0,pointerOffsetY2:0,targetOffsetX:0,targetOffsetY:0,targetScale:0,pinchOffsetX:0,pinchOffsetY:0,limitOffsetX:0,limitOffsetY:0,scaleDifference:0,targetPinchDistance:0,touchCount:0,doubleTapped:!1,touchmoveCount:0}),this.options=Object.assign(this.defaultOptions,e),this.isPassiveEventsSupported=this.checkPassiveEventsSupport(),typeof i=="string"?(this.initialSelector=i,this.elements=Array.from(document.querySelectorAll(i))):this.elements=i.length!==void 0&&0<i.length?Array.from(i):[i],this.relatedElements=[],this.transitionPrefix=this.calculateTransitionPrefix(),this.transitionCapable=this.transitionPrefix!==!1,this.initialLocationHash=this.hash,this.options.rel&&(this.elements=this.getRelated(this.options.rel)),this.options.uniqueImages&&(t=[],this.elements=Array.from(this.elements).filter(function(s){return s=s.getAttribute(o.options.sourceAttr),t.indexOf(s)===-1&&(t.push(s),!0)})),this.createDomNodes(),this.options.close&&this.domNodes.wrapper.appendChild(this.domNodes.closeButton),this.options.nav&&this.domNodes.wrapper.appendChild(this.domNodes.navigation),this.options.spinner&&this.domNodes.wrapper.appendChild(this.domNodes.spinner),this.addEventListener(this.elements,"click."+this.eventNamespace,function(s){if(o.isValidLink(s.currentTarget)){if(s.preventDefault(),o.isAnimating)return!1;o.initialImageIndex=o.elements.indexOf(s.currentTarget),o.openImage(s.currentTarget)}}),this.options.docClose&&this.addEventListener(this.domNodes.wrapper,["click."+this.eventNamespace,"touchstart."+this.eventNamespace],function(s){o.isOpen&&s.target===s.currentTarget&&o.close()}),this.options.disableRightClick&&this.addEventListener(document.body,"contextmenu."+this.eventNamespace,function(s){s.target.parentElement.classList.contains("sl-image")&&s.preventDefault()}),this.options.enableKeyboard&&this.addEventListener(document.body,"keyup."+this.eventNamespace,this.throttle(function(s){o.controlCoordinates.swipeDiff=0,o.isAnimating&&s.key==="Escape"?(o.currentImage.setAttribute("src",""),o.isAnimating=!1,o.close()):o.isOpen&&(s.preventDefault(),s.key==="Escape"&&o.close(),!o.isAnimating&&-1<["ArrowLeft","ArrowRight"].indexOf(s.key)&&o.loadImage(s.key==="ArrowRight"?1:-1))},this.options.throttleInterval)),this.addEvents()}var N,I;return N=m,(I=[{key:"checkPassiveEventsSupport",value:function(){var i=!1;try{var e=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch{}return i}},{key:"getCaptionElement",value:function(i){var e,t;return this.options.captionSelector.startsWith("+")?(t=this.options.captionSelector.replace(/^\+/,"").trimStart(),!(!(e=i.nextElementSibling)||!e.matches(t))&&e):this.options.captionSelector.startsWith(">")?(t=this.options.captionSelector.replace(/^>/,"").trimStart(),i.querySelector(t)):i.querySelector(this.options.captionSelector)}},{key:"generateQuerySelector",value:function(i){var e=i.tagName,t=i.id,o=i.className,s=i.parentNode;if(e==="HTML")return"HTML";var r=e;if(r+=t!==""?"#".concat(t):"",o)for(var l=o.trim().split(/\s/),h=0;h<l.length;h++)r+=".".concat(l[h]);for(var c=1,f=i;f.previousElementSibling;f=f.previousElementSibling)c+=1;return r+=":nth-child(".concat(c,")"),"".concat(this.generateQuerySelector(s)," > ").concat(r)}},{key:"createDomNodes",value:function(){var i,e;this.domNodes.overlay=document.createElement("div"),this.domNodes.overlay.classList.add("sl-overlay"),this.domNodes.overlay.dataset.opacityTarget=this.options.overlayOpacity,this.domNodes.closeButton=document.createElement("button"),this.domNodes.closeButton.classList.add("sl-close"),this.domNodes.closeButton.innerHTML=this.options.closeText,this.domNodes.spinner=document.createElement("div"),this.domNodes.spinner.classList.add("sl-spinner"),this.domNodes.spinner.innerHTML="<div></div>",this.domNodes.navigation=document.createElement("div"),this.domNodes.navigation.classList.add("sl-navigation"),this.domNodes.navigation.innerHTML='<button class="sl-prev">'.concat(this.options.navText[0],'</button><button class="sl-next">').concat(this.options.navText[1],"</button>"),this.domNodes.counter=document.createElement("div"),this.domNodes.counter.classList.add("sl-counter"),this.domNodes.counter.innerHTML='<span class="sl-current"></span>/<span class="sl-total"></span>',this.domNodes.download=document.createElement("div"),this.domNodes.download.classList.add("sl-download"),this.domNodes.downloadLink=document.createElement("a"),this.domNodes.downloadLink.setAttribute("download",""),this.domNodes.downloadLink.textContent=this.options.download,this.domNodes.download.appendChild(this.domNodes.downloadLink),this.domNodes.caption=document.createElement("div"),this.domNodes.caption.classList.add("sl-caption","pos-"+this.options.captionPosition),this.options.captionClass&&(e=this.options.captionClass.split(/[\s,]+/),(i=this.domNodes.caption.classList).add.apply(i,C(e))),this.domNodes.image=document.createElement("div"),this.domNodes.image.classList.add("sl-image"),this.domNodes.wrapper=document.createElement("div"),this.domNodes.wrapper.classList.add("sl-wrapper"),this.domNodes.wrapper.setAttribute("tabindex",-1),this.domNodes.wrapper.setAttribute("role","dialog"),this.domNodes.wrapper.setAttribute("aria-hidden",!1),this.options.className&&this.domNodes.wrapper.classList.add(this.options.className),this.options.rtl&&this.domNodes.wrapper.classList.add("sl-dir-rtl")}},{key:"throttle",value:function(i,e){var t;return function(){t||(i.apply(this,arguments),t=!0,setTimeout(function(){return t=!1},e))}}},{key:"isValidLink",value:function(i){return!this.options.fileExt||i.getAttribute(this.options.sourceAttr)&&new RegExp("("+this.options.fileExt+")($|\\?.*$)","i").test(i.getAttribute(this.options.sourceAttr))}},{key:"calculateTransitionPrefix",value:function(){var i=(document.body||document.documentElement).style;return"transition"in i?"":"WebkitTransition"in i?"-webkit-":"MozTransition"in i?"-moz-":"OTransition"in i&&"-o"}},{key:"getScrollbarWidth",value:function(){var i,e=document.createElement("div");return e.classList.add("sl-scrollbar-measure"),document.body.appendChild(e),i=e.offsetWidth-e.clientWidth,document.body.removeChild(e),i}},{key:"toggleScrollbar",value:function(i){var e,t=0,o=[].slice.call(document.querySelectorAll("."+this.options.fixedClass));return i==="hide"?((i=window.innerWidth)||(i=(e=document.documentElement.getBoundingClientRect()).right-Math.abs(e.left)),(document.body.clientWidth<i||this.isAppleDevice)&&(e=parseInt(window.getComputedStyle(document.body).paddingRight||0,10),t=this.getScrollbarWidth(),document.body.dataset.originalPaddingRight=e,(0<t||t==0&&this.isAppleDevice)&&(document.body.classList.add("hidden-scroll"),document.body.style.paddingRight=e+t+"px",o.forEach(function(s){var r=s.style.paddingRight,l=window.getComputedStyle(s)["padding-right"];s.dataset.originalPaddingRight=r,s.style.paddingRight="".concat(parseFloat(l)+t,"px")})))):(document.body.classList.remove("hidden-scroll"),document.body.style.paddingRight=document.body.dataset.originalPaddingRight+"px",o.forEach(function(s){var r=s.dataset.originalPaddingRight;r!==void 0&&(s.style.paddingRight=r)})),t}},{key:"close",value:function(){var i=this;if(!this.isOpen||this.isAnimating||this.isClosing)return!1;this.isClosing=!0;var e,t=this.relatedElements[this.currentImageIndex];for(e in t.dispatchEvent(new Event("close.simplelightbox")),this.options.history&&(this.historyHasChanges=!1,this.hashReseted||this.resetHash()),this.removeEventListener(document,"focusin."+this.eventNamespace),this.fadeOut(this.domNodes.overlay,this.options.fadeSpeed),this.fadeOut(document.querySelectorAll(".sl-image img,  .sl-close, .sl-navigation, .sl-image .sl-caption, .sl-counter"),this.options.fadeSpeed,function(){i.options.disableScroll&&i.toggleScrollbar("show"),i.options.htmlClass&&i.options.htmlClass!==""&&document.querySelector("html").classList.remove(i.options.htmlClass),document.body.removeChild(i.domNodes.wrapper),i.options.overlay&&document.body.removeChild(i.domNodes.overlay),i.domNodes.additionalHtml=null,i.domNodes.download=null,t.dispatchEvent(new Event("closed.simplelightbox")),i.isClosing=!1}),this.currentImage=null,this.isOpen=!1,this.isAnimating=!1,this.controlCoordinates)this.controlCoordinates[e]=0;this.controlCoordinates.mousedown=!1,this.controlCoordinates.zoomed=!1,this.controlCoordinates.capture=!1,this.controlCoordinates.initialScale=this.minMax(1,1,this.options.maxZoom),this.controlCoordinates.doubleTapped=!1}},{key:"hash",get:function(){return window.location.hash.substring(1)}},{key:"preload",value:function(){var i=this,e=this.currentImageIndex,o=this.relatedElements.length,t=e+1<0?o-1:o-1<=e+1?0:e+1,o=e-1<0?o-1:o-1<=e-1?0:e-1,s=new Image,r=new Image;s.addEventListener("load",function(l){l=l.target.getAttribute("src"),i.loadedImages.indexOf(l)===-1&&i.loadedImages.push(l),i.relatedElements[e].dispatchEvent(new Event("nextImageLoaded."+i.eventNamespace))}),s.setAttribute("src",this.relatedElements[t].getAttribute(this.options.sourceAttr)),r.addEventListener("load",function(l){l=l.target.getAttribute("src"),i.loadedImages.indexOf(l)===-1&&i.loadedImages.push(l),i.relatedElements[e].dispatchEvent(new Event("prevImageLoaded."+i.eventNamespace))}),r.setAttribute("src",this.relatedElements[o].getAttribute(this.options.sourceAttr))}},{key:"loadImage",value:function(o){var e=this,t=o,o=(this.options.rtl&&(o=-o),this.relatedElements[this.currentImageIndex].dispatchEvent(new Event("change."+this.eventNamespace)),this.relatedElements[this.currentImageIndex].dispatchEvent(new Event((o===1?"next":"prev")+"."+this.eventNamespace)),this.currentImageIndex+o);if(this.isAnimating||(o<0||o>=this.relatedElements.length)&&this.options.loop===!1)return!1;this.currentImageIndex=o<0?this.relatedElements.length-1:o>this.relatedElements.length-1?0:o,this.domNodes.counter.querySelector(".sl-current").innerHTML=this.currentImageIndex+1,this.options.animationSlide&&this.slide(this.options.animationSpeed/1e3,-100*t-this.controlCoordinates.swipeDiff+"px"),this.fadeOut(this.domNodes.image,this.options.fadeSpeed,function(){e.isAnimating=!0,e.isClosing?e.isAnimating=!1:setTimeout(function(){var s=e.relatedElements[e.currentImageIndex];e.currentImage&&(e.currentImage.setAttribute("src",s.getAttribute(e.options.sourceAttr)),e.loadedImages.indexOf(s.getAttribute(e.options.sourceAttr))===-1&&e.show(e.domNodes.spinner),e.domNodes.image.contains(e.domNodes.caption)&&e.domNodes.image.removeChild(e.domNodes.caption),e.adjustImage(t),e.options.preloading&&e.preload())},100)})}},{key:"adjustImage",value:function(i){var e=this;if(!this.currentImage)return!1;var t=new Image,o=window.innerWidth*this.options.widthRatio,s=window.innerHeight*this.options.heightRatio;t.setAttribute("src",this.currentImage.getAttribute("src")),this.currentImage.dataset.scale=1,this.currentImage.dataset.translateX=0,this.currentImage.dataset.translateY=0,this.zoomPanElement(0,0,1),t.addEventListener("error",function(r){e.relatedElements[e.currentImageIndex].dispatchEvent(new Event("error."+e.eventNamespace)),e.isAnimating=!1,e.isOpen=!0,e.domNodes.spinner.style.display="none";var l=i===1||i===-1;if(e.initialImageIndex===e.currentImageIndex&&l)return e.close();e.options.alertError&&alert(e.options.alertErrorMessage),e.loadImage(l?i:1)}),t.addEventListener("load",function(u){i!==void 0&&(e.relatedElements[e.currentImageIndex].dispatchEvent(new Event("changed."+e.eventNamespace)),e.relatedElements[e.currentImageIndex].dispatchEvent(new Event((i===1?"nextDone":"prevDone")+"."+e.eventNamespace))),e.options.history&&e.updateURL(),e.loadedImages.indexOf(e.currentImage.getAttribute("src"))===-1&&e.loadedImages.push(e.currentImage.getAttribute("src"));var l,h,c,f=u.target.width,u=u.target.height;(e.options.scaleImageToRatio||o<f||s<u)&&(f/=l=o/s<f/u?f/o:u/s,u/=l),e.domNodes.image.style.top=(window.innerHeight-u)/2+"px",e.domNodes.image.style.left=(window.innerWidth-f-e.globalScrollbarWidth)/2+"px",e.domNodes.image.style.width=f+"px",e.domNodes.image.style.height=u+"px",e.domNodes.spinner.style.display="none",e.options.focus&&e.forceFocus(),e.fadeIn(e.currentImage,e.options.fadeSpeed,function(){e.options.focus&&e.domNodes.wrapper.focus()}),e.isOpen=!0,typeof e.options.captionSelector=="string"?h=e.options.captionSelector==="self"?e.relatedElements[e.currentImageIndex]:e.getCaptionElement(e.relatedElements[e.currentImageIndex]):typeof e.options.captionSelector=="function"&&(h=e.options.captionSelector(e.relatedElements[e.currentImageIndex])),e.options.captions&&h&&(c=e.options.captionType==="data"?h.dataset[e.options.captionsData]:e.options.captionType==="text"?h.innerHTML:h.getAttribute(e.options.captionsData)),e.options.loop?e.relatedElements.length===1?e.hide(e.domNodes.navigation.querySelectorAll(".sl-prev, .sl-next")):e.show(e.domNodes.navigation.querySelectorAll(".sl-prev, .sl-next")):(e.currentImageIndex===0&&e.hide(e.domNodes.navigation.querySelector(".sl-prev")),e.currentImageIndex>=e.relatedElements.length-1&&e.hide(e.domNodes.navigation.querySelector(".sl-next")),0<e.currentImageIndex&&e.show(e.domNodes.navigation.querySelector(".sl-prev")),e.currentImageIndex<e.relatedElements.length-1&&e.show(e.domNodes.navigation.querySelector(".sl-next"))),i===1||i===-1?(e.options.animationSlide&&(e.slide(0,100*i+"px"),setTimeout(function(){e.slide(e.options.animationSpeed/1e3,"0px")},50)),e.fadeIn(e.domNodes.image,e.options.fadeSpeed,function(){e.isAnimating=!1,e.setCaption(c,f)})):(e.isAnimating=!1,e.setCaption(c,f)),e.options.additionalHtml&&!e.domNodes.additionalHtml&&(e.domNodes.additionalHtml=document.createElement("div"),e.domNodes.additionalHtml.classList.add("sl-additional-html"),e.domNodes.additionalHtml.innerHTML=e.options.additionalHtml,e.domNodes.image.appendChild(e.domNodes.additionalHtml)),e.options.download&&e.domNodes.downloadLink.setAttribute("href",e.currentImage.getAttribute("src"))})}},{key:"zoomPanElement",value:function(i,e,t){this.currentImage.style[this.transitionPrefix+"transform"]="translate("+i+","+e+") scale("+t+")"}},{key:"minMax",value:function(i,e,t){return i<e?e:t<i?t:i}},{key:"setZoomData",value:function(i,e,t){this.currentImage.dataset.scale=i,this.currentImage.dataset.translateX=e,this.currentImage.dataset.translateY=t}},{key:"hashchangeHandler",value:function(){this.isOpen&&this.hash===this.initialLocationHash&&(this.hashReseted=!0,this.close())}},{key:"addEvents",value:function(){var i,e=this;this.addEventListener(window,"resize."+this.eventNamespace,function(t){e.isOpen&&e.adjustImage()}),this.addEventListener(this.domNodes.closeButton,["click."+this.eventNamespace,"touchstart."+this.eventNamespace],this.close.bind(this)),this.options.history&&setTimeout(function(){e.addEventListener(window,"hashchange."+e.eventNamespace,function(t){e.isOpen&&e.hashchangeHandler()})},40),this.addEventListener(this.domNodes.navigation.getElementsByTagName("button"),"click."+this.eventNamespace,function(t){if(!t.currentTarget.tagName.match(/button/i))return!0;t.preventDefault(),e.controlCoordinates.swipeDiff=0,e.loadImage(t.currentTarget.classList.contains("sl-next")?1:-1)}),this.options.scrollZoom&&(i=1,this.addEventListener(this.domNodes.image,["mousewheel","DOMMouseScroll"],function(t){if(e.controlCoordinates.mousedown||e.isAnimating||e.isClosing||!e.isOpen)return!0;e.controlCoordinates.containerHeight==0&&(e.controlCoordinates.containerHeight=e.getDimensions(e.domNodes.image).height,e.controlCoordinates.containerWidth=e.getDimensions(e.domNodes.image).width,e.controlCoordinates.imgHeight=e.getDimensions(e.currentImage).height,e.controlCoordinates.imgWidth=e.getDimensions(e.currentImage).width,e.controlCoordinates.containerOffsetX=e.domNodes.image.offsetLeft,e.controlCoordinates.containerOffsetY=e.domNodes.image.offsetTop,e.controlCoordinates.initialOffsetX=parseFloat(e.currentImage.dataset.translateX),e.controlCoordinates.initialOffsetY=parseFloat(e.currentImage.dataset.translateY));var o=t.delta||t.wheelDelta,o=(o===void 0&&(o=t.detail),o=Math.max(-1,Math.min(1,o)),i+=o*e.options.scrollZoomFactor*i,i=Math.max(1,Math.min(e.options.maxZoom,i)),e.controlCoordinates.targetScale=i,document.documentElement.scrollTop||document.body.scrollTop);e.controlCoordinates.pinchOffsetX=t.pageX,e.controlCoordinates.pinchOffsetY=t.pageY-o||0,e.controlCoordinates.limitOffsetX=(e.controlCoordinates.imgWidth*e.controlCoordinates.targetScale-e.controlCoordinates.containerWidth)/2,e.controlCoordinates.limitOffsetY=(e.controlCoordinates.imgHeight*e.controlCoordinates.targetScale-e.controlCoordinates.containerHeight)/2,e.controlCoordinates.scaleDifference=e.controlCoordinates.targetScale-e.controlCoordinates.initialScale,e.controlCoordinates.targetOffsetX=e.controlCoordinates.imgWidth*e.controlCoordinates.targetScale<=e.controlCoordinates.containerWidth?0:e.minMax(e.controlCoordinates.initialOffsetX-(e.controlCoordinates.pinchOffsetX-e.controlCoordinates.containerOffsetX-e.controlCoordinates.containerWidth/2-e.controlCoordinates.initialOffsetX)/(e.controlCoordinates.targetScale-e.controlCoordinates.scaleDifference)*e.controlCoordinates.scaleDifference,-1*e.controlCoordinates.limitOffsetX,e.controlCoordinates.limitOffsetX),e.controlCoordinates.targetOffsetY=e.controlCoordinates.imgHeight*e.controlCoordinates.targetScale<=e.controlCoordinates.containerHeight?0:e.minMax(e.controlCoordinates.initialOffsetY-(e.controlCoordinates.pinchOffsetY-e.controlCoordinates.containerOffsetY-e.controlCoordinates.containerHeight/2-e.controlCoordinates.initialOffsetY)/(e.controlCoordinates.targetScale-e.controlCoordinates.scaleDifference)*e.controlCoordinates.scaleDifference,-1*e.controlCoordinates.limitOffsetY,e.controlCoordinates.limitOffsetY),e.zoomPanElement(e.controlCoordinates.targetOffsetX+"px",e.controlCoordinates.targetOffsetY+"px",e.controlCoordinates.targetScale),1<e.controlCoordinates.targetScale?(e.controlCoordinates.zoomed=!0,(!e.domNodes.caption.style.opacity||0<e.domNodes.caption.style.opacity)&&e.domNodes.caption.style.display!=="none"&&e.fadeOut(e.domNodes.caption,e.options.fadeSpeed)):(e.controlCoordinates.initialScale===1&&(e.controlCoordinates.zoomed=!1,e.domNodes.caption.style.display==="none"&&e.fadeIn(e.domNodes.caption,e.options.fadeSpeed)),e.controlCoordinates.initialPinchDistance=null,e.controlCoordinates.capture=!1),e.controlCoordinates.initialPinchDistance=e.controlCoordinates.targetPinchDistance,e.controlCoordinates.initialScale=e.controlCoordinates.targetScale,e.controlCoordinates.initialOffsetX=e.controlCoordinates.targetOffsetX,e.controlCoordinates.initialOffsetY=e.controlCoordinates.targetOffsetY,e.setZoomData(e.controlCoordinates.targetScale,e.controlCoordinates.targetOffsetX,e.controlCoordinates.targetOffsetY),e.zoomPanElement(e.controlCoordinates.targetOffsetX+"px",e.controlCoordinates.targetOffsetY+"px",e.controlCoordinates.targetScale)})),this.addEventListener(this.domNodes.image,["touchstart."+this.eventNamespace,"mousedown."+this.eventNamespace],function(t){if(t.target.tagName==="A"&&t.type==="touchstart")return!0;if(t.type==="mousedown")t.preventDefault(),e.controlCoordinates.initialPointerOffsetX=t.clientX,e.controlCoordinates.initialPointerOffsetY=t.clientY,e.controlCoordinates.containerHeight=e.getDimensions(e.domNodes.image).height,e.controlCoordinates.containerWidth=e.getDimensions(e.domNodes.image).width,e.controlCoordinates.imgHeight=e.getDimensions(e.currentImage).height,e.controlCoordinates.imgWidth=e.getDimensions(e.currentImage).width,e.controlCoordinates.containerOffsetX=e.domNodes.image.offsetLeft,e.controlCoordinates.containerOffsetY=e.domNodes.image.offsetTop,e.controlCoordinates.initialOffsetX=parseFloat(e.currentImage.dataset.translateX),e.controlCoordinates.initialOffsetY=parseFloat(e.currentImage.dataset.translateY);else if(e.controlCoordinates.touchCount=t.touches.length,e.controlCoordinates.initialPointerOffsetX=t.touches[0].clientX,e.controlCoordinates.initialPointerOffsetY=t.touches[0].clientY,e.controlCoordinates.containerHeight=e.getDimensions(e.domNodes.image).height,e.controlCoordinates.containerWidth=e.getDimensions(e.domNodes.image).width,e.controlCoordinates.imgHeight=e.getDimensions(e.currentImage).height,e.controlCoordinates.imgWidth=e.getDimensions(e.currentImage).width,e.controlCoordinates.containerOffsetX=e.domNodes.image.offsetLeft,e.controlCoordinates.containerOffsetY=e.domNodes.image.offsetTop,e.controlCoordinates.touchCount===1){if(e.controlCoordinates.doubleTapped)return e.currentImage.classList.add("sl-transition"),e.controlCoordinates.zoomed?(e.controlCoordinates.initialScale=1,e.setZoomData(e.controlCoordinates.initialScale,0,0),e.zoomPanElement("0px","0px",e.controlCoordinates.initialScale),e.controlCoordinates.zoomed=!1):(e.controlCoordinates.initialScale=e.options.doubleTapZoom,e.setZoomData(e.controlCoordinates.initialScale,0,0),e.zoomPanElement("0px","0px",e.controlCoordinates.initialScale),(!e.domNodes.caption.style.opacity||0<e.domNodes.caption.style.opacity)&&e.domNodes.caption.style.display!=="none"&&e.fadeOut(e.domNodes.caption,e.options.fadeSpeed),e.controlCoordinates.zoomed=!0),setTimeout(function(){e.currentImage&&e.currentImage.classList.remove("sl-transition")},200),!1;e.controlCoordinates.doubleTapped=!0,setTimeout(function(){e.controlCoordinates.doubleTapped=!1},300),e.controlCoordinates.initialOffsetX=parseFloat(e.currentImage.dataset.translateX),e.controlCoordinates.initialOffsetY=parseFloat(e.currentImage.dataset.translateY)}else e.controlCoordinates.touchCount===2&&(e.controlCoordinates.initialPointerOffsetX2=t.touches[1].clientX,e.controlCoordinates.initialPointerOffsetY2=t.touches[1].clientY,e.controlCoordinates.initialOffsetX=parseFloat(e.currentImage.dataset.translateX),e.controlCoordinates.initialOffsetY=parseFloat(e.currentImage.dataset.translateY),e.controlCoordinates.pinchOffsetX=(e.controlCoordinates.initialPointerOffsetX+e.controlCoordinates.initialPointerOffsetX2)/2,e.controlCoordinates.pinchOffsetY=(e.controlCoordinates.initialPointerOffsetY+e.controlCoordinates.initialPointerOffsetY2)/2,e.controlCoordinates.initialPinchDistance=Math.sqrt((e.controlCoordinates.initialPointerOffsetX-e.controlCoordinates.initialPointerOffsetX2)*(e.controlCoordinates.initialPointerOffsetX-e.controlCoordinates.initialPointerOffsetX2)+(e.controlCoordinates.initialPointerOffsetY-e.controlCoordinates.initialPointerOffsetY2)*(e.controlCoordinates.initialPointerOffsetY-e.controlCoordinates.initialPointerOffsetY2)));return e.controlCoordinates.capture=!0,!!e.controlCoordinates.mousedown||(e.transitionCapable&&(e.controlCoordinates.imageLeft=parseInt(e.domNodes.image.style.left,10)),e.controlCoordinates.mousedown=!0,e.controlCoordinates.swipeDiff=0,e.controlCoordinates.swipeYDiff=0,e.controlCoordinates.swipeStart=t.pageX||t.touches[0].pageX,e.controlCoordinates.swipeYStart=t.pageY||t.touches[0].pageY,!1)}),this.addEventListener(this.domNodes.image,["touchmove."+this.eventNamespace,"mousemove."+this.eventNamespace,"MSPointerMove"],function(t){if(!e.controlCoordinates.mousedown)return!0;if(t.type==="touchmove"){if(e.controlCoordinates.capture===!1)return!1;e.controlCoordinates.pointerOffsetX=t.touches[0].clientX,e.controlCoordinates.pointerOffsetY=t.touches[0].clientY,e.controlCoordinates.touchCount=t.touches.length,e.controlCoordinates.touchmoveCount++,1<e.controlCoordinates.touchCount?(e.controlCoordinates.pointerOffsetX2=t.touches[1].clientX,e.controlCoordinates.pointerOffsetY2=t.touches[1].clientY,e.controlCoordinates.targetPinchDistance=Math.sqrt((e.controlCoordinates.pointerOffsetX-e.controlCoordinates.pointerOffsetX2)*(e.controlCoordinates.pointerOffsetX-e.controlCoordinates.pointerOffsetX2)+(e.controlCoordinates.pointerOffsetY-e.controlCoordinates.pointerOffsetY2)*(e.controlCoordinates.pointerOffsetY-e.controlCoordinates.pointerOffsetY2)),e.controlCoordinates.initialPinchDistance===null&&(e.controlCoordinates.initialPinchDistance=e.controlCoordinates.targetPinchDistance),1<=Math.abs(e.controlCoordinates.initialPinchDistance-e.controlCoordinates.targetPinchDistance)&&(e.controlCoordinates.targetScale=e.minMax(e.controlCoordinates.targetPinchDistance/e.controlCoordinates.initialPinchDistance*e.controlCoordinates.initialScale,1,e.options.maxZoom),e.controlCoordinates.limitOffsetX=(e.controlCoordinates.imgWidth*e.controlCoordinates.targetScale-e.controlCoordinates.containerWidth)/2,e.controlCoordinates.limitOffsetY=(e.controlCoordinates.imgHeight*e.controlCoordinates.targetScale-e.controlCoordinates.containerHeight)/2,e.controlCoordinates.scaleDifference=e.controlCoordinates.targetScale-e.controlCoordinates.initialScale,e.controlCoordinates.targetOffsetX=e.controlCoordinates.imgWidth*e.controlCoordinates.targetScale<=e.controlCoordinates.containerWidth?0:e.minMax(e.controlCoordinates.initialOffsetX-(e.controlCoordinates.pinchOffsetX-e.controlCoordinates.containerOffsetX-e.controlCoordinates.containerWidth/2-e.controlCoordinates.initialOffsetX)/(e.controlCoordinates.targetScale-e.controlCoordinates.scaleDifference)*e.controlCoordinates.scaleDifference,-1*e.controlCoordinates.limitOffsetX,e.controlCoordinates.limitOffsetX),e.controlCoordinates.targetOffsetY=e.controlCoordinates.imgHeight*e.controlCoordinates.targetScale<=e.controlCoordinates.containerHeight?0:e.minMax(e.controlCoordinates.initialOffsetY-(e.controlCoordinates.pinchOffsetY-e.controlCoordinates.containerOffsetY-e.controlCoordinates.containerHeight/2-e.controlCoordinates.initialOffsetY)/(e.controlCoordinates.targetScale-e.controlCoordinates.scaleDifference)*e.controlCoordinates.scaleDifference,-1*e.controlCoordinates.limitOffsetY,e.controlCoordinates.limitOffsetY),e.zoomPanElement(e.controlCoordinates.targetOffsetX+"px",e.controlCoordinates.targetOffsetY+"px",e.controlCoordinates.targetScale),1<e.controlCoordinates.targetScale&&(e.controlCoordinates.zoomed=!0,(!e.domNodes.caption.style.opacity||0<e.domNodes.caption.style.opacity)&&e.domNodes.caption.style.display!=="none"&&e.fadeOut(e.domNodes.caption,e.options.fadeSpeed)),e.controlCoordinates.initialPinchDistance=e.controlCoordinates.targetPinchDistance,e.controlCoordinates.initialScale=e.controlCoordinates.targetScale,e.controlCoordinates.initialOffsetX=e.controlCoordinates.targetOffsetX,e.controlCoordinates.initialOffsetY=e.controlCoordinates.targetOffsetY)):(e.controlCoordinates.targetScale=e.controlCoordinates.initialScale,e.controlCoordinates.limitOffsetX=(e.controlCoordinates.imgWidth*e.controlCoordinates.targetScale-e.controlCoordinates.containerWidth)/2,e.controlCoordinates.limitOffsetY=(e.controlCoordinates.imgHeight*e.controlCoordinates.targetScale-e.controlCoordinates.containerHeight)/2,e.controlCoordinates.targetOffsetX=e.controlCoordinates.imgWidth*e.controlCoordinates.targetScale<=e.controlCoordinates.containerWidth?0:e.minMax(e.controlCoordinates.pointerOffsetX-(e.controlCoordinates.initialPointerOffsetX-e.controlCoordinates.initialOffsetX),-1*e.controlCoordinates.limitOffsetX,e.controlCoordinates.limitOffsetX),e.controlCoordinates.targetOffsetY=e.controlCoordinates.imgHeight*e.controlCoordinates.targetScale<=e.controlCoordinates.containerHeight?0:e.minMax(e.controlCoordinates.pointerOffsetY-(e.controlCoordinates.initialPointerOffsetY-e.controlCoordinates.initialOffsetY),-1*e.controlCoordinates.limitOffsetY,e.controlCoordinates.limitOffsetY),Math.abs(e.controlCoordinates.targetOffsetX)===Math.abs(e.controlCoordinates.limitOffsetX)&&(e.controlCoordinates.initialOffsetX=e.controlCoordinates.targetOffsetX,e.controlCoordinates.initialPointerOffsetX=e.controlCoordinates.pointerOffsetX),Math.abs(e.controlCoordinates.targetOffsetY)===Math.abs(e.controlCoordinates.limitOffsetY)&&(e.controlCoordinates.initialOffsetY=e.controlCoordinates.targetOffsetY,e.controlCoordinates.initialPointerOffsetY=e.controlCoordinates.pointerOffsetY),e.setZoomData(e.controlCoordinates.initialScale,e.controlCoordinates.targetOffsetX,e.controlCoordinates.targetOffsetY),e.zoomPanElement(e.controlCoordinates.targetOffsetX+"px",e.controlCoordinates.targetOffsetY+"px",e.controlCoordinates.targetScale))}if(t.type==="mousemove"&&e.controlCoordinates.mousedown){if(t.type=="touchmove")return!0;if(t.preventDefault(),e.controlCoordinates.capture===!1)return!1;e.controlCoordinates.pointerOffsetX=t.clientX,e.controlCoordinates.pointerOffsetY=t.clientY,e.controlCoordinates.targetScale=e.controlCoordinates.initialScale,e.controlCoordinates.limitOffsetX=(e.controlCoordinates.imgWidth*e.controlCoordinates.targetScale-e.controlCoordinates.containerWidth)/2,e.controlCoordinates.limitOffsetY=(e.controlCoordinates.imgHeight*e.controlCoordinates.targetScale-e.controlCoordinates.containerHeight)/2,e.controlCoordinates.targetOffsetX=e.controlCoordinates.imgWidth*e.controlCoordinates.targetScale<=e.controlCoordinates.containerWidth?0:e.minMax(e.controlCoordinates.pointerOffsetX-(e.controlCoordinates.initialPointerOffsetX-e.controlCoordinates.initialOffsetX),-1*e.controlCoordinates.limitOffsetX,e.controlCoordinates.limitOffsetX),e.controlCoordinates.targetOffsetY=e.controlCoordinates.imgHeight*e.controlCoordinates.targetScale<=e.controlCoordinates.containerHeight?0:e.minMax(e.controlCoordinates.pointerOffsetY-(e.controlCoordinates.initialPointerOffsetY-e.controlCoordinates.initialOffsetY),-1*e.controlCoordinates.limitOffsetY,e.controlCoordinates.limitOffsetY),Math.abs(e.controlCoordinates.targetOffsetX)===Math.abs(e.controlCoordinates.limitOffsetX)&&(e.controlCoordinates.initialOffsetX=e.controlCoordinates.targetOffsetX,e.controlCoordinates.initialPointerOffsetX=e.controlCoordinates.pointerOffsetX),Math.abs(e.controlCoordinates.targetOffsetY)===Math.abs(e.controlCoordinates.limitOffsetY)&&(e.controlCoordinates.initialOffsetY=e.controlCoordinates.targetOffsetY,e.controlCoordinates.initialPointerOffsetY=e.controlCoordinates.pointerOffsetY),e.setZoomData(e.controlCoordinates.initialScale,e.controlCoordinates.targetOffsetX,e.controlCoordinates.targetOffsetY),e.zoomPanElement(e.controlCoordinates.targetOffsetX+"px",e.controlCoordinates.targetOffsetY+"px",e.controlCoordinates.targetScale)}e.controlCoordinates.zoomed||(e.controlCoordinates.swipeEnd=t.pageX||t.touches[0].pageX,e.controlCoordinates.swipeYEnd=t.pageY||t.touches[0].pageY,e.controlCoordinates.swipeDiff=e.controlCoordinates.swipeStart-e.controlCoordinates.swipeEnd,e.controlCoordinates.swipeYDiff=e.controlCoordinates.swipeYStart-e.controlCoordinates.swipeYEnd,e.options.animationSlide&&e.slide(0,-e.controlCoordinates.swipeDiff+"px"))}),this.addEventListener(this.domNodes.image,["touchend."+this.eventNamespace,"mouseup."+this.eventNamespace,"touchcancel."+this.eventNamespace,"mouseleave."+this.eventNamespace,"pointerup","pointercancel","MSPointerUp","MSPointerCancel"],function(t){e.isTouchDevice&&t.type==="touchend"&&(e.controlCoordinates.touchCount=t.touches.length,e.controlCoordinates.touchCount===0?(e.currentImage&&e.setZoomData(e.controlCoordinates.initialScale,e.controlCoordinates.targetOffsetX,e.controlCoordinates.targetOffsetY),e.controlCoordinates.initialScale===1&&(e.controlCoordinates.zoomed=!1,e.domNodes.caption.style.display==="none"&&e.fadeIn(e.domNodes.caption,e.options.fadeSpeed)),e.controlCoordinates.initialPinchDistance=null,e.controlCoordinates.capture=!1):e.controlCoordinates.touchCount===1?(e.controlCoordinates.initialPointerOffsetX=t.touches[0].clientX,e.controlCoordinates.initialPointerOffsetY=t.touches[0].clientY):1<e.controlCoordinates.touchCount&&(e.controlCoordinates.initialPinchDistance=null)),e.controlCoordinates.mousedown&&(t=!(e.controlCoordinates.mousedown=!1),e.options.loop||(e.currentImageIndex===0&&e.controlCoordinates.swipeDiff<0&&(t=!1),e.currentImageIndex>=e.relatedElements.length-1&&0<e.controlCoordinates.swipeDiff&&(t=!1)),Math.abs(e.controlCoordinates.swipeDiff)>e.options.swipeTolerance&&t?e.loadImage(0<e.controlCoordinates.swipeDiff?1:-1):e.options.animationSlide&&e.slide(e.options.animationSpeed/1e3,"0px"),e.options.swipeClose&&50<Math.abs(e.controlCoordinates.swipeYDiff)&&Math.abs(e.controlCoordinates.swipeDiff)<e.options.swipeTolerance&&e.close())}),this.addEventListener(this.domNodes.image,["dblclick"],function(t){if(!e.isTouchDevice)return e.controlCoordinates.initialPointerOffsetX=t.clientX,e.controlCoordinates.initialPointerOffsetY=t.clientY,e.controlCoordinates.containerHeight=e.getDimensions(e.domNodes.image).height,e.controlCoordinates.containerWidth=e.getDimensions(e.domNodes.image).width,e.controlCoordinates.imgHeight=e.getDimensions(e.currentImage).height,e.controlCoordinates.imgWidth=e.getDimensions(e.currentImage).width,e.controlCoordinates.containerOffsetX=e.domNodes.image.offsetLeft,e.controlCoordinates.containerOffsetY=e.domNodes.image.offsetTop,e.currentImage.classList.add("sl-transition"),e.controlCoordinates.zoomed?(e.controlCoordinates.initialScale=1,e.setZoomData(e.controlCoordinates.initialScale,0,0),e.zoomPanElement("0px","0px",e.controlCoordinates.initialScale),e.controlCoordinates.zoomed=!1,e.domNodes.caption.style.display==="none"&&e.fadeIn(e.domNodes.caption,e.options.fadeSpeed)):(e.controlCoordinates.initialScale=e.options.doubleTapZoom,e.setZoomData(e.controlCoordinates.initialScale,0,0),e.zoomPanElement("0px","0px",e.controlCoordinates.initialScale),(!e.domNodes.caption.style.opacity||0<e.domNodes.caption.style.opacity)&&e.domNodes.caption.style.display!=="none"&&e.fadeOut(e.domNodes.caption,e.options.fadeSpeed),e.controlCoordinates.zoomed=!0),setTimeout(function(){e.currentImage&&(e.currentImage.classList.remove("sl-transition"),e.currentImage.style[e.transitionPrefix+"transform-origin"]=null)},200),!(e.controlCoordinates.capture=!0)})}},{key:"getDimensions",value:function(o){var e=window.getComputedStyle(o),t=o.offsetHeight,o=o.offsetWidth,s=parseFloat(e.borderTopWidth);return{height:t-parseFloat(e.borderBottomWidth)-s-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom),width:o-parseFloat(e.borderLeftWidth)-parseFloat(e.borderRightWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)}}},{key:"updateHash",value:function(){var i="pid="+(this.currentImageIndex+1),e=window.location.href.split("#")[0]+"#"+i;this.hashReseted=!1,this.pushStateSupport?window.history[this.historyHasChanges?"replaceState":"pushState"]("",document.title,e):this.historyHasChanges?window.location.replace(e):window.location.hash=i,this.historyHasChanges||(this.urlChangedOnce=!0),this.historyHasChanges=!0}},{key:"resetHash",value:function(){this.hashReseted=!0,this.urlChangedOnce?history.back():this.pushStateSupport?history.pushState("",document.title,window.location.pathname+window.location.search):window.location.hash="",clearTimeout(this.historyUpdateTimeout)}},{key:"updateURL",value:function(){clearTimeout(this.historyUpdateTimeout),this.historyHasChanges?this.historyUpdateTimeout=setTimeout(this.updateHash.bind(this),800):this.updateHash()}},{key:"setCaption",value:function(i,e,t){var o=this;this.options.captions&&i&&i!==""&&i!==void 0&&(t=(t=t??this.options.captionHTML)==null||t?"innerHTML":"innerText",this.hide(this.domNodes.caption),this.domNodes.caption.style.width=e+"px",this.domNodes.caption[t]=i,this.domNodes.image.appendChild(this.domNodes.caption),setTimeout(function(){o.fadeIn(o.domNodes.caption,o.options.fadeSpeed)},this.options.captionDelay))}},{key:"slide",value:function(i,e){if(!this.transitionCapable)return this.domNodes.image.style.left=e;this.domNodes.image.style[this.transitionPrefix+"transform"]="translateX("+e+")",this.domNodes.image.style[this.transitionPrefix+"transition"]=this.transitionPrefix+"transform "+i+"s linear"}},{key:"getRelated",value:function(i){var e=i&&i!==!1&&i!=="nofollow"?Array.from(this.elements).filter(function(t){return t.getAttribute("rel")===i}):this.elements;return e}},{key:"openImage",value:function(i){var e=this,t=(i.dispatchEvent(new Event("show."+this.eventNamespace)),this.globalScrollbarWidth=this.getScrollbarWidth(),this.options.disableScroll&&(this.toggleScrollbar("hide"),this.globalScrollbarWidth=0),this.options.htmlClass&&this.options.htmlClass!==""&&document.querySelector("html").classList.add(this.options.htmlClass),document.body.appendChild(this.domNodes.wrapper),this.domNodes.wrapper.appendChild(this.domNodes.image),this.options.overlay&&document.body.appendChild(this.domNodes.overlay),this.relatedElements=this.getRelated(i.rel),this.options.showCounter&&(this.relatedElements.length==1&&this.domNodes.wrapper.contains(this.domNodes.counter)?this.domNodes.wrapper.removeChild(this.domNodes.counter):1<this.relatedElements.length&&!this.domNodes.wrapper.contains(this.domNodes.counter)&&this.domNodes.wrapper.appendChild(this.domNodes.counter)),this.options.download&&this.domNodes.download&&this.domNodes.wrapper.appendChild(this.domNodes.download),this.isAnimating=!0,this.currentImageIndex=this.relatedElements.indexOf(i),i.getAttribute(this.options.sourceAttr));this.currentImage=document.createElement("img"),this.currentImage.style.display="none",this.currentImage.setAttribute("src",t),this.currentImage.dataset.scale=1,this.currentImage.dataset.translateX=0,this.currentImage.dataset.translateY=0,this.loadedImages.indexOf(t)===-1&&this.loadedImages.push(t),this.domNodes.image.innerHTML="",this.domNodes.image.setAttribute("style",""),this.domNodes.image.appendChild(this.currentImage),this.fadeIn(this.domNodes.overlay,this.options.fadeSpeed),this.fadeIn([this.domNodes.counter,this.domNodes.navigation,this.domNodes.closeButton,this.domNodes.download],this.options.fadeSpeed),this.show(this.domNodes.spinner),this.domNodes.counter.querySelector(".sl-current").innerHTML=this.currentImageIndex+1,this.domNodes.counter.querySelector(".sl-total").innerHTML=this.relatedElements.length,this.adjustImage(),this.options.preloading&&this.preload(),setTimeout(function(){i.dispatchEvent(new Event("shown."+e.eventNamespace))},this.options.animationSpeed)}},{key:"forceFocus",value:function(){var i=this;this.removeEventListener(document,"focusin."+this.eventNamespace),this.addEventListener(document,"focusin."+this.eventNamespace,function(e){document===e.target||i.domNodes.wrapper===e.target||i.domNodes.wrapper.contains(e.target)||i.domNodes.wrapper.focus()})}},{key:"addEventListener",value:function(i,e,t,o){i=this.wrap(i),e=this.wrap(e);var s,r=p(i);try{for(r.s();!(s=r.n()).done;){var l,h=s.value,c=(h.namespaces||(h.namespaces={}),p(e));try{for(c.s();!(l=c.n()).done;){var f=l.value,u=o||!1;0<=["touchstart","touchmove","mousewheel","DOMMouseScroll"].indexOf(f.split(".")[0])&&this.isPassiveEventsSupported&&(g(u)==="object"?u.passive=!0:u={passive:!0}),h.namespaces[f]=t,h.addEventListener(f.split(".")[0],t,u)}}catch(w){c.e(w)}finally{c.f()}}}catch(w){r.e(w)}finally{r.f()}}},{key:"removeEventListener",value:function(i,e){i=this.wrap(i),e=this.wrap(e);var t,o=p(i);try{for(o.s();!(t=o.n()).done;){var s,r=t.value,l=p(e);try{for(l.s();!(s=l.n()).done;){var h=s.value;r.namespaces&&r.namespaces[h]&&(r.removeEventListener(h.split(".")[0],r.namespaces[h]),delete r.namespaces[h])}}catch(c){l.e(c)}finally{l.f()}}}catch(c){o.e(c)}finally{o.f()}}},{key:"fadeOut",value:function(i,e,t){var o,s=this,r=p(i=this.wrap(i));try{for(r.s();!(o=r.n()).done;){var l=o.value;l.style.opacity=parseFloat(l)||window.getComputedStyle(l).getPropertyValue("opacity")}}catch(c){r.e(c)}finally{r.f()}this.isFadeIn=!1;var h=16.66666/(e||this.options.fadeSpeed);(function c(){var f=parseFloat(i[0].style.opacity);if((f-=h)<0){var u,w=p(i);try{for(w.s();!(u=w.n()).done;){var E=u.value;E.style.display="none",E.style.opacity=1}}catch(L){w.e(L)}finally{w.f()}t&&t.call(s,i)}else{var Y,X=p(i);try{for(X.s();!(Y=X.n()).done;)Y.value.style.opacity=f}catch(L){X.e(L)}finally{X.f()}requestAnimationFrame(c)}})()}},{key:"fadeIn",value:function(i,e,t,o){var s,r=this,l=p(i=this.wrap(i));try{for(l.s();!(s=l.n()).done;){var h=s.value;h&&(h.style.opacity=0,h.style.display=o||"block")}}catch(u){l.e(u)}finally{l.f()}this.isFadeIn=!0;var c=parseFloat(i[0].dataset.opacityTarget||1),f=16.66666*c/(e||this.options.fadeSpeed);(function u(){var w=parseFloat(i[0].style.opacity);if((w+=f)>c){var E,Y=p(i);try{for(Y.s();!(E=Y.n()).done;){var X=E.value;X&&(X.style.opacity=c)}}catch(P){Y.e(P)}finally{Y.f()}t&&t.call(r,i)}else{var L,D=p(i);try{for(D.s();!(L=D.n()).done;){var T=L.value;T&&(T.style.opacity=w)}}catch(P){D.e(P)}finally{D.f()}r.isFadeIn&&requestAnimationFrame(u)}})()}},{key:"hide",value:function(i){var e,t=p(i=this.wrap(i));try{for(t.s();!(e=t.n()).done;){var o=e.value;o.style.display!="none"&&(o.dataset.initialDisplay=o.style.display),o.style.display="none"}}catch(s){t.e(s)}finally{t.f()}}},{key:"show",value:function(i,e){var t,o=p(i=this.wrap(i));try{for(o.s();!(t=o.n()).done;){var s=t.value;s.style.display=s.dataset.initialDisplay||e||"block"}}catch(r){o.e(r)}finally{o.f()}}},{key:"wrap",value:function(i){return typeof i[Symbol.iterator]=="function"&&typeof i!="string"?i:[i]}},{key:"on",value:function(i,e){i=this.wrap(i);var t,o=p(this.elements);try{for(o.s();!(t=o.n()).done;){var s,r=t.value,l=(r.fullyNamespacedEvents||(r.fullyNamespacedEvents={}),p(i));try{for(l.s();!(s=l.n()).done;){var h=s.value;r.fullyNamespacedEvents[h]=e,r.addEventListener(h,e)}}catch(c){l.e(c)}finally{l.f()}}}catch(c){o.e(c)}finally{o.f()}return this}},{key:"off",value:function(i){i=this.wrap(i);var e,t=p(this.elements);try{for(t.s();!(e=t.n()).done;){var o,s=e.value,r=p(i);try{for(r.s();!(o=r.n()).done;){var l=o.value;s.fullyNamespacedEvents!==void 0&&l in s.fullyNamespacedEvents&&s.removeEventListener(l,s.fullyNamespacedEvents[l])}}catch(h){r.e(h)}finally{r.f()}}}catch(h){t.e(h)}finally{t.f()}return this}},{key:"open",value:function(i){var e=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0;i=i||this.elements[0],typeof jQuery<"u"&&i instanceof jQuery&&(i=i.get(0)),0<e&&(i=this.elements[e]),this.initialImageIndex=this.elements.indexOf(i),-1<this.initialImageIndex&&this.openImage(i)}},{key:"openPosition",value:function(i){var e=this.elements[i];this.open(e,i)}},{key:"next",value:function(){this.loadImage(1)}},{key:"prev",value:function(){this.loadImage(-1)}},{key:"getLighboxData",value:function(){return{currentImageIndex:this.currentImageIndex,currentImage:this.currentImage,globalScrollbarWidth:this.globalScrollbarWidth}}},{key:"destroy",value:function(){this.off(["close."+this.eventNamespace,"closed."+this.eventNamespace,"nextImageLoaded."+this.eventNamespace,"prevImageLoaded."+this.eventNamespace,"change."+this.eventNamespace,"nextDone."+this.eventNamespace,"prevDone."+this.eventNamespace,"error."+this.eventNamespace,"changed."+this.eventNamespace,"next."+this.eventNamespace,"prev."+this.eventNamespace,"show."+this.eventNamespace,"shown."+this.eventNamespace]),this.removeEventListener(this.elements,"click."+this.eventNamespace),this.removeEventListener(document,"focusin."+this.eventNamespace),this.removeEventListener(document.body,"contextmenu."+this.eventNamespace),this.removeEventListener(document.body,"keyup."+this.eventNamespace),this.removeEventListener(this.domNodes.navigation.getElementsByTagName("button"),"click."+this.eventNamespace),this.removeEventListener(this.domNodes.closeButton,"click."+this.eventNamespace),this.removeEventListener(window,"resize."+this.eventNamespace),this.removeEventListener(window,"hashchange."+this.eventNamespace),this.close(),this.isOpen&&(document.body.removeChild(this.domNodes.wrapper),document.body.removeChild(this.domNodes.overlay)),this.elements=null}},{key:"refresh",value:function(){var i,e;if(this.initialSelector)return i=this.options,e=this.initialSelector,this.destroy(),this.constructor(e,i),this;throw"refreshing only works when you initialize using a selector!"}}])&&S(N.prototype,I),Object.defineProperty(N,"prototype",{writable:!1}),m}();a.default=A,d.SimpleLightbox=A}).call(this)}).call(this,typeof W<"u"?W:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[1]);class j{constructor(n,a){b(this,"defaultOptions",{sourceAttr:"href",overlay:!0,overlayOpacity:.7,spinner:!0,nav:!0,navText:["&lsaquo;","&rsaquo;"],captions:!0,captionDelay:0,captionSelector:"img",captionType:"attr",captionsData:"title",captionPosition:"bottom",captionClass:"",captionHTML:!0,close:!0,closeText:"&times;",swipeClose:!0,showCounter:!0,fileExt:"png|jpg|jpeg|gif|webp",animationSlide:!0,animationSpeed:250,preloading:!0,enableKeyboard:!0,loop:!0,rel:!1,docClose:!0,swipeTolerance:50,className:"simple-lightbox",widthRatio:.8,heightRatio:.9,scaleImageToRatio:!1,disableRightClick:!1,disableScroll:!0,alertError:!0,alertErrorMessage:"Image not found, next image will be loaded",additionalHtml:!1,history:!0,throttleInterval:0,doubleTapZoom:2,maxZoom:10,htmlClass:"has-lightbox",rtl:!1,fixedClass:"sl-fixed",fadeSpeed:300,uniqueImages:!0,focus:!0,scrollZoom:!0,scrollZoomFactor:.5,download:!1});b(this,"transitionPrefix");b(this,"isPassiveEventsSupported");b(this,"transitionCapable",!1);b(this,"isTouchDevice","ontouchstart"in window);b(this,"isAppleDevice",/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform));b(this,"initialLocationHash");b(this,"pushStateSupport","pushState"in history);b(this,"isOpen",!1);b(this,"isAnimating",!1);b(this,"isClosing",!1);b(this,"isFadeIn",!1);b(this,"urlChangedOnce",!1);b(this,"hashReseted",!1);b(this,"historyHasChanges",!1);b(this,"historyUpdateTimeout",null);b(this,"currentImage");b(this,"eventNamespace","simplelightbox");b(this,"domNodes",{});b(this,"loadedImages",[]);b(this,"initialImageIndex",0);b(this,"currentImageIndex",0);b(this,"initialSelector",null);b(this,"globalScrollbarWidth",0);b(this,"controlCoordinates",{swipeDiff:0,swipeYDiff:0,swipeStart:0,swipeEnd:0,swipeYStart:0,swipeYEnd:0,mousedown:!1,imageLeft:0,zoomed:!1,containerHeight:0,containerWidth:0,containerOffsetX:0,containerOffsetY:0,imgHeight:0,imgWidth:0,capture:!1,initialOffsetX:0,initialOffsetY:0,initialPointerOffsetX:0,initialPointerOffsetY:0,initialPointerOffsetX2:0,initialPointerOffsetY2:0,initialScale:1,initialPinchDistance:0,pointerOffsetX:0,pointerOffsetY:0,pointerOffsetX2:0,pointerOffsetY2:0,targetOffsetX:0,targetOffsetY:0,targetScale:0,pinchOffsetX:0,pinchOffsetY:0,limitOffsetX:0,limitOffsetY:0,scaleDifference:0,targetPinchDistance:0,touchCount:0,doubleTapped:!1,touchmoveCount:0});if(this.options=Object.assign(this.defaultOptions,a),this.isPassiveEventsSupported=this.checkPassiveEventsSupport(),typeof n=="string"?(this.initialSelector=n,this.elements=Array.from(document.querySelectorAll(n))):this.elements=typeof n.length<"u"&&n.length>0?Array.from(n):[n],this.relatedElements=[],this.transitionPrefix=this.calculateTransitionPrefix(),this.transitionCapable=this.transitionPrefix!==!1,this.initialLocationHash=this.hash,this.options.rel&&(this.elements=this.getRelated(this.options.rel)),this.options.uniqueImages){let d=[];this.elements=Array.from(this.elements).filter(g=>{let p=g.getAttribute(this.options.sourceAttr);return d.indexOf(p)===-1?(d.push(p),!0):!1})}this.createDomNodes(),this.options.close&&this.domNodes.wrapper.appendChild(this.domNodes.closeButton),this.options.nav&&this.domNodes.wrapper.appendChild(this.domNodes.navigation),this.options.spinner&&this.domNodes.wrapper.appendChild(this.domNodes.spinner),this.addEventListener(this.elements,"click."+this.eventNamespace,d=>{if(this.isValidLink(d.currentTarget)){if(d.preventDefault(),this.isAnimating)return!1;this.initialImageIndex=this.elements.indexOf(d.currentTarget),this.openImage(d.currentTarget)}}),this.options.docClose&&this.addEventListener(this.domNodes.wrapper,["click."+this.eventNamespace,"touchstart."+this.eventNamespace],d=>{this.isOpen&&d.target===d.currentTarget&&this.close()}),this.options.disableRightClick&&this.addEventListener(document.body,"contextmenu."+this.eventNamespace,d=>{d.target.parentElement.classList.contains("sl-image")&&d.preventDefault()}),this.options.enableKeyboard&&this.addEventListener(document.body,"keyup."+this.eventNamespace,this.throttle(d=>{if(this.controlCoordinates.swipeDiff=0,this.isAnimating&&d.key==="Escape"){this.currentImage.setAttribute("src",""),this.isAnimating=!1,this.close();return}this.isOpen&&(d.preventDefault(),d.key==="Escape"&&this.close(),!this.isAnimating&&["ArrowLeft","ArrowRight"].indexOf(d.key)>-1&&this.loadImage(d.key==="ArrowRight"?1:-1))},this.options.throttleInterval)),this.addEvents()}checkPassiveEventsSupport(){let n=!1;try{let a=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("testPassive",null,a),window.removeEventListener("testPassive",null,a)}catch{}return n}getCaptionElement(n){if(this.options.captionSelector.startsWith("+")){let a=this.options.captionSelector.replace(/^\+/,"").trimStart(),d=n.nextElementSibling;return d&&d.matches(a)?d:!1}else if(this.options.captionSelector.startsWith(">")){let a=this.options.captionSelector.replace(/^>/,"").trimStart();return n.querySelector(a)}else return n.querySelector(this.options.captionSelector)}generateQuerySelector(n){const{tagName:a,id:d,className:g,parentNode:p}=n;if(a==="HTML")return"HTML";let C=a;if(C+=d!==""?`#${d}`:"",g){const y=g.trim().split(/\s/);for(let S=0;S<y.length;S++)C+=`.${y[S]}`}let v=1;for(let y=n;y.previousElementSibling;y=y.previousElementSibling)v+=1;return C+=`:nth-child(${v})`,`${this.generateQuerySelector(p)} > ${C}`}createDomNodes(){if(this.domNodes.overlay=document.createElement("div"),this.domNodes.overlay.classList.add("sl-overlay"),this.domNodes.overlay.dataset.opacityTarget=this.options.overlayOpacity,this.domNodes.closeButton=document.createElement("button"),this.domNodes.closeButton.classList.add("sl-close"),this.domNodes.closeButton.innerHTML=this.options.closeText,this.domNodes.spinner=document.createElement("div"),this.domNodes.spinner.classList.add("sl-spinner"),this.domNodes.spinner.innerHTML="<div></div>",this.domNodes.navigation=document.createElement("div"),this.domNodes.navigation.classList.add("sl-navigation"),this.domNodes.navigation.innerHTML=`<button class="sl-prev">${this.options.navText[0]}</button><button class="sl-next">${this.options.navText[1]}</button>`,this.domNodes.counter=document.createElement("div"),this.domNodes.counter.classList.add("sl-counter"),this.domNodes.counter.innerHTML='<span class="sl-current"></span>/<span class="sl-total"></span>',this.domNodes.download=document.createElement("div"),this.domNodes.download.classList.add("sl-download"),this.domNodes.downloadLink=document.createElement("a"),this.domNodes.downloadLink.setAttribute("download",""),this.domNodes.downloadLink.textContent=this.options.download,this.domNodes.download.appendChild(this.domNodes.downloadLink),this.domNodes.caption=document.createElement("div"),this.domNodes.caption.classList.add("sl-caption","pos-"+this.options.captionPosition),this.options.captionClass){let n=this.options.captionClass.split(/[\s,]+/);this.domNodes.caption.classList.add(...n)}this.domNodes.image=document.createElement("div"),this.domNodes.image.classList.add("sl-image"),this.domNodes.wrapper=document.createElement("div"),this.domNodes.wrapper.classList.add("sl-wrapper"),this.domNodes.wrapper.setAttribute("tabindex",-1),this.domNodes.wrapper.setAttribute("role","dialog"),this.domNodes.wrapper.setAttribute("aria-hidden",!1),this.options.className&&this.domNodes.wrapper.classList.add(this.options.className),this.options.rtl&&this.domNodes.wrapper.classList.add("sl-dir-rtl")}throttle(n,a){let d;return function(){d||(n.apply(this,arguments),d=!0,setTimeout(function(){return d=!1},a))}}isValidLink(n){return!this.options.fileExt||n.getAttribute(this.options.sourceAttr)&&new RegExp("("+this.options.fileExt+")($|\\?.*$)","i").test(n.getAttribute(this.options.sourceAttr))}calculateTransitionPrefix(){let n=(document.body||document.documentElement).style;return"transition"in n?"":"WebkitTransition"in n?"-webkit-":"MozTransition"in n?"-moz-":"OTransition"in n?"-o":!1}getScrollbarWidth(){let n=0,a=document.createElement("div");return a.classList.add("sl-scrollbar-measure"),document.body.appendChild(a),n=a.offsetWidth-a.clientWidth,document.body.removeChild(a),n}toggleScrollbar(n){let a=0,d=[].slice.call(document.querySelectorAll("."+this.options.fixedClass));if(n==="hide"){let g=window.innerWidth;if(!g){let p=document.documentElement.getBoundingClientRect();g=p.right-Math.abs(p.left)}if(document.body.clientWidth<g||this.isAppleDevice){let p=parseInt(window.getComputedStyle(document.body).paddingRight||0,10);a=this.getScrollbarWidth(),document.body.dataset.originalPaddingRight=p,(a>0||a==0&&this.isAppleDevice)&&(document.body.classList.add("hidden-scroll"),document.body.style.paddingRight=p+a+"px",d.forEach(C=>{const v=C.style.paddingRight,y=window.getComputedStyle(C)["padding-right"];C.dataset.originalPaddingRight=v,C.style.paddingRight=`${parseFloat(y)+a}px`}))}}else document.body.classList.remove("hidden-scroll"),document.body.style.paddingRight=document.body.dataset.originalPaddingRight+"px",d.forEach(g=>{const p=g.dataset.originalPaddingRight;typeof p<"u"&&(g.style.paddingRight=p)});return a}close(){if(!this.isOpen||this.isAnimating||this.isClosing)return!1;this.isClosing=!0;let n=this.relatedElements[this.currentImageIndex];n.dispatchEvent(new Event("close.simplelightbox")),this.options.history&&(this.historyHasChanges=!1,this.hashReseted||this.resetHash()),this.removeEventListener(document,"focusin."+this.eventNamespace),this.fadeOut(this.domNodes.overlay,this.options.fadeSpeed),this.fadeOut(document.querySelectorAll(".sl-image img,  .sl-close, .sl-navigation, .sl-image .sl-caption, .sl-counter"),this.options.fadeSpeed,()=>{this.options.disableScroll&&this.toggleScrollbar("show"),this.options.htmlClass&&this.options.htmlClass!==""&&document.querySelector("html").classList.remove(this.options.htmlClass),document.body.removeChild(this.domNodes.wrapper),this.options.overlay&&document.body.removeChild(this.domNodes.overlay),this.domNodes.additionalHtml=null,this.domNodes.download=null,n.dispatchEvent(new Event("closed.simplelightbox")),this.isClosing=!1}),this.currentImage=null,this.isOpen=!1,this.isAnimating=!1;for(let a in this.controlCoordinates)this.controlCoordinates[a]=0;this.controlCoordinates.mousedown=!1,this.controlCoordinates.zoomed=!1,this.controlCoordinates.capture=!1,this.controlCoordinates.initialScale=this.minMax(1,1,this.options.maxZoom),this.controlCoordinates.doubleTapped=!1}get hash(){return window.location.hash.substring(1)}preload(){let n=this.currentImageIndex,a=this.relatedElements.length,d=n+1<0?a-1:n+1>=a-1?0:n+1,g=n-1<0?a-1:n-1>=a-1?0:n-1,p=new Image,C=new Image;p.addEventListener("load",v=>{let y=v.target.getAttribute("src");this.loadedImages.indexOf(y)===-1&&this.loadedImages.push(y),this.relatedElements[n].dispatchEvent(new Event("nextImageLoaded."+this.eventNamespace))}),p.setAttribute("src",this.relatedElements[d].getAttribute(this.options.sourceAttr)),C.addEventListener("load",v=>{let y=v.target.getAttribute("src");this.loadedImages.indexOf(y)===-1&&this.loadedImages.push(y),this.relatedElements[n].dispatchEvent(new Event("prevImageLoaded."+this.eventNamespace))}),C.setAttribute("src",this.relatedElements[g].getAttribute(this.options.sourceAttr))}loadImage(n){let a=n;this.options.rtl&&(n=-n),this.relatedElements[this.currentImageIndex].dispatchEvent(new Event("change."+this.eventNamespace)),this.relatedElements[this.currentImageIndex].dispatchEvent(new Event((n===1?"next":"prev")+"."+this.eventNamespace));let d=this.currentImageIndex+n;if(this.isAnimating||(d<0||d>=this.relatedElements.length)&&this.options.loop===!1)return!1;this.currentImageIndex=d<0?this.relatedElements.length-1:d>this.relatedElements.length-1?0:d,this.domNodes.counter.querySelector(".sl-current").innerHTML=this.currentImageIndex+1,this.options.animationSlide&&this.slide(this.options.animationSpeed/1e3,-100*a-this.controlCoordinates.swipeDiff+"px"),this.fadeOut(this.domNodes.image,this.options.fadeSpeed,()=>{this.isAnimating=!0,this.isClosing?this.isAnimating=!1:setTimeout(()=>{let g=this.relatedElements[this.currentImageIndex];this.currentImage&&(this.currentImage.setAttribute("src",g.getAttribute(this.options.sourceAttr)),this.loadedImages.indexOf(g.getAttribute(this.options.sourceAttr))===-1&&this.show(this.domNodes.spinner),this.domNodes.image.contains(this.domNodes.caption)&&this.domNodes.image.removeChild(this.domNodes.caption),this.adjustImage(a),this.options.preloading&&this.preload())},100)})}adjustImage(n){if(!this.currentImage)return!1;let a=new Image,d=window.innerWidth*this.options.widthRatio,g=window.innerHeight*this.options.heightRatio;a.setAttribute("src",this.currentImage.getAttribute("src")),this.currentImage.dataset.scale=1,this.currentImage.dataset.translateX=0,this.currentImage.dataset.translateY=0,this.zoomPanElement(0,0,1),a.addEventListener("error",p=>{this.relatedElements[this.currentImageIndex].dispatchEvent(new Event("error."+this.eventNamespace)),this.isAnimating=!1,this.isOpen=!0,this.domNodes.spinner.style.display="none";let C=n===1||n===-1;if(this.initialImageIndex===this.currentImageIndex&&C)return this.close();this.options.alertError&&alert(this.options.alertErrorMessage),this.loadImage(C?n:1)}),a.addEventListener("load",p=>{typeof n<"u"&&(this.relatedElements[this.currentImageIndex].dispatchEvent(new Event("changed."+this.eventNamespace)),this.relatedElements[this.currentImageIndex].dispatchEvent(new Event((n===1?"nextDone":"prevDone")+"."+this.eventNamespace))),this.options.history&&this.updateURL(),this.loadedImages.indexOf(this.currentImage.getAttribute("src"))===-1&&this.loadedImages.push(this.currentImage.getAttribute("src"));let C=p.target.width,v=p.target.height;if(this.options.scaleImageToRatio||C>d||v>g){let O=C/v>d/g?C/d:v/g;C/=O,v/=O}this.domNodes.image.style.top=(window.innerHeight-v)/2+"px",this.domNodes.image.style.left=(window.innerWidth-C-this.globalScrollbarWidth)/2+"px",this.domNodes.image.style.width=C+"px",this.domNodes.image.style.height=v+"px",this.domNodes.spinner.style.display="none",this.options.focus&&this.forceFocus(),this.fadeIn(this.currentImage,this.options.fadeSpeed,()=>{this.options.focus&&this.domNodes.wrapper.focus()}),this.isOpen=!0;let y,S;typeof this.options.captionSelector=="string"?y=this.options.captionSelector==="self"?this.relatedElements[this.currentImageIndex]:this.getCaptionElement(this.relatedElements[this.currentImageIndex]):typeof this.options.captionSelector=="function"&&(y=this.options.captionSelector(this.relatedElements[this.currentImageIndex])),this.options.captions&&y&&(this.options.captionType==="data"?S=y.dataset[this.options.captionsData]:this.options.captionType==="text"?S=y.innerHTML:S=y.getAttribute(this.options.captionsData)),this.options.loop?this.relatedElements.length===1?this.hide(this.domNodes.navigation.querySelectorAll(".sl-prev, .sl-next")):this.show(this.domNodes.navigation.querySelectorAll(".sl-prev, .sl-next")):(this.currentImageIndex===0&&this.hide(this.domNodes.navigation.querySelector(".sl-prev")),this.currentImageIndex>=this.relatedElements.length-1&&this.hide(this.domNodes.navigation.querySelector(".sl-next")),this.currentImageIndex>0&&this.show(this.domNodes.navigation.querySelector(".sl-prev")),this.currentImageIndex<this.relatedElements.length-1&&this.show(this.domNodes.navigation.querySelector(".sl-next"))),n===1||n===-1?(this.options.animationSlide&&(this.slide(0,100*n+"px"),setTimeout(()=>{this.slide(this.options.animationSpeed/1e3,0+"px")},50)),this.fadeIn(this.domNodes.image,this.options.fadeSpeed,()=>{this.isAnimating=!1,this.setCaption(S,C)})):(this.isAnimating=!1,this.setCaption(S,C)),this.options.additionalHtml&&!this.domNodes.additionalHtml&&(this.domNodes.additionalHtml=document.createElement("div"),this.domNodes.additionalHtml.classList.add("sl-additional-html"),this.domNodes.additionalHtml.innerHTML=this.options.additionalHtml,this.domNodes.image.appendChild(this.domNodes.additionalHtml)),this.options.download&&this.domNodes.downloadLink.setAttribute("href",this.currentImage.getAttribute("src"))})}zoomPanElement(n,a,d){this.currentImage.style[this.transitionPrefix+"transform"]="translate("+n+","+a+") scale("+d+")"}minMax(n,a,d){return n<a?a:n>d?d:n}setZoomData(n,a,d){this.currentImage.dataset.scale=n,this.currentImage.dataset.translateX=a,this.currentImage.dataset.translateY=d}hashchangeHandler(){this.isOpen&&this.hash===this.initialLocationHash&&(this.hashReseted=!0,this.close())}addEvents(){if(this.addEventListener(window,"resize."+this.eventNamespace,n=>{this.isOpen&&this.adjustImage()}),this.addEventListener(this.domNodes.closeButton,["click."+this.eventNamespace,"touchstart."+this.eventNamespace],this.close.bind(this)),this.options.history&&setTimeout(()=>{this.addEventListener(window,"hashchange."+this.eventNamespace,n=>{this.isOpen&&this.hashchangeHandler()})},40),this.addEventListener(this.domNodes.navigation.getElementsByTagName("button"),"click."+this.eventNamespace,n=>{if(!n.currentTarget.tagName.match(/button/i))return!0;n.preventDefault(),this.controlCoordinates.swipeDiff=0,this.loadImage(n.currentTarget.classList.contains("sl-next")?1:-1)}),this.options.scrollZoom){let n=1;this.addEventListener(this.domNodes.image,["mousewheel","DOMMouseScroll"],a=>{if(this.controlCoordinates.mousedown||this.isAnimating||this.isClosing||!this.isOpen)return!0;this.controlCoordinates.containerHeight==0&&(this.controlCoordinates.containerHeight=this.getDimensions(this.domNodes.image).height,this.controlCoordinates.containerWidth=this.getDimensions(this.domNodes.image).width,this.controlCoordinates.imgHeight=this.getDimensions(this.currentImage).height,this.controlCoordinates.imgWidth=this.getDimensions(this.currentImage).width,this.controlCoordinates.containerOffsetX=this.domNodes.image.offsetLeft,this.controlCoordinates.containerOffsetY=this.domNodes.image.offsetTop,this.controlCoordinates.initialOffsetX=parseFloat(this.currentImage.dataset.translateX),this.controlCoordinates.initialOffsetY=parseFloat(this.currentImage.dataset.translateY));let d=a.delta||a.wheelDelta;d===void 0&&(d=a.detail),d=Math.max(-1,Math.min(1,d)),n+=d*this.options.scrollZoomFactor*n,n=Math.max(1,Math.min(this.options.maxZoom,n)),this.controlCoordinates.targetScale=n;let g=document.documentElement.scrollTop||document.body.scrollTop;this.controlCoordinates.pinchOffsetX=a.pageX,this.controlCoordinates.pinchOffsetY=a.pageY-g||0,this.controlCoordinates.limitOffsetX=(this.controlCoordinates.imgWidth*this.controlCoordinates.targetScale-this.controlCoordinates.containerWidth)/2,this.controlCoordinates.limitOffsetY=(this.controlCoordinates.imgHeight*this.controlCoordinates.targetScale-this.controlCoordinates.containerHeight)/2,this.controlCoordinates.scaleDifference=this.controlCoordinates.targetScale-this.controlCoordinates.initialScale,this.controlCoordinates.targetOffsetX=this.controlCoordinates.imgWidth*this.controlCoordinates.targetScale<=this.controlCoordinates.containerWidth?0:this.minMax(this.controlCoordinates.initialOffsetX-(this.controlCoordinates.pinchOffsetX-this.controlCoordinates.containerOffsetX-this.controlCoordinates.containerWidth/2-this.controlCoordinates.initialOffsetX)/(this.controlCoordinates.targetScale-this.controlCoordinates.scaleDifference)*this.controlCoordinates.scaleDifference,this.controlCoordinates.limitOffsetX*-1,this.controlCoordinates.limitOffsetX),this.controlCoordinates.targetOffsetY=this.controlCoordinates.imgHeight*this.controlCoordinates.targetScale<=this.controlCoordinates.containerHeight?0:this.minMax(this.controlCoordinates.initialOffsetY-(this.controlCoordinates.pinchOffsetY-this.controlCoordinates.containerOffsetY-this.controlCoordinates.containerHeight/2-this.controlCoordinates.initialOffsetY)/(this.controlCoordinates.targetScale-this.controlCoordinates.scaleDifference)*this.controlCoordinates.scaleDifference,this.controlCoordinates.limitOffsetY*-1,this.controlCoordinates.limitOffsetY),this.zoomPanElement(this.controlCoordinates.targetOffsetX+"px",this.controlCoordinates.targetOffsetY+"px",this.controlCoordinates.targetScale),this.controlCoordinates.targetScale>1?(this.controlCoordinates.zoomed=!0,(!this.domNodes.caption.style.opacity||this.domNodes.caption.style.opacity>0)&&this.domNodes.caption.style.display!=="none"&&this.fadeOut(this.domNodes.caption,this.options.fadeSpeed)):(this.controlCoordinates.initialScale===1&&(this.controlCoordinates.zoomed=!1,this.domNodes.caption.style.display==="none"&&this.fadeIn(this.domNodes.caption,this.options.fadeSpeed)),this.controlCoordinates.initialPinchDistance=null,this.controlCoordinates.capture=!1),this.controlCoordinates.initialPinchDistance=this.controlCoordinates.targetPinchDistance,this.controlCoordinates.initialScale=this.controlCoordinates.targetScale,this.controlCoordinates.initialOffsetX=this.controlCoordinates.targetOffsetX,this.controlCoordinates.initialOffsetY=this.controlCoordinates.targetOffsetY,this.setZoomData(this.controlCoordinates.targetScale,this.controlCoordinates.targetOffsetX,this.controlCoordinates.targetOffsetY),this.zoomPanElement(this.controlCoordinates.targetOffsetX+"px",this.controlCoordinates.targetOffsetY+"px",this.controlCoordinates.targetScale)})}this.addEventListener(this.domNodes.image,["touchstart."+this.eventNamespace,"mousedown."+this.eventNamespace],n=>{if(n.target.tagName==="A"&&n.type==="touchstart")return!0;if(n.type==="mousedown")n.preventDefault(),this.controlCoordinates.initialPointerOffsetX=n.clientX,this.controlCoordinates.initialPointerOffsetY=n.clientY,this.controlCoordinates.containerHeight=this.getDimensions(this.domNodes.image).height,this.controlCoordinates.containerWidth=this.getDimensions(this.domNodes.image).width,this.controlCoordinates.imgHeight=this.getDimensions(this.currentImage).height,this.controlCoordinates.imgWidth=this.getDimensions(this.currentImage).width,this.controlCoordinates.containerOffsetX=this.domNodes.image.offsetLeft,this.controlCoordinates.containerOffsetY=this.domNodes.image.offsetTop,this.controlCoordinates.initialOffsetX=parseFloat(this.currentImage.dataset.translateX),this.controlCoordinates.initialOffsetY=parseFloat(this.currentImage.dataset.translateY),this.controlCoordinates.capture=!0;else{if(this.controlCoordinates.touchCount=n.touches.length,this.controlCoordinates.initialPointerOffsetX=n.touches[0].clientX,this.controlCoordinates.initialPointerOffsetY=n.touches[0].clientY,this.controlCoordinates.containerHeight=this.getDimensions(this.domNodes.image).height,this.controlCoordinates.containerWidth=this.getDimensions(this.domNodes.image).width,this.controlCoordinates.imgHeight=this.getDimensions(this.currentImage).height,this.controlCoordinates.imgWidth=this.getDimensions(this.currentImage).width,this.controlCoordinates.containerOffsetX=this.domNodes.image.offsetLeft,this.controlCoordinates.containerOffsetY=this.domNodes.image.offsetTop,this.controlCoordinates.touchCount===1){if(!this.controlCoordinates.doubleTapped)this.controlCoordinates.doubleTapped=!0,setTimeout(()=>{this.controlCoordinates.doubleTapped=!1},300);else return this.currentImage.classList.add("sl-transition"),this.controlCoordinates.zoomed?(this.controlCoordinates.initialScale=1,this.setZoomData(this.controlCoordinates.initialScale,0,0),this.zoomPanElement(0+"px",0+"px",this.controlCoordinates.initialScale),this.controlCoordinates.zoomed=!1):(this.controlCoordinates.initialScale=this.options.doubleTapZoom,this.setZoomData(this.controlCoordinates.initialScale,0,0),this.zoomPanElement(0+"px",0+"px",this.controlCoordinates.initialScale),(!this.domNodes.caption.style.opacity||this.domNodes.caption.style.opacity>0)&&this.domNodes.caption.style.display!=="none"&&this.fadeOut(this.domNodes.caption,this.options.fadeSpeed),this.controlCoordinates.zoomed=!0),setTimeout(()=>{this.currentImage&&this.currentImage.classList.remove("sl-transition")},200),!1;this.controlCoordinates.initialOffsetX=parseFloat(this.currentImage.dataset.translateX),this.controlCoordinates.initialOffsetY=parseFloat(this.currentImage.dataset.translateY)}else this.controlCoordinates.touchCount===2&&(this.controlCoordinates.initialPointerOffsetX2=n.touches[1].clientX,this.controlCoordinates.initialPointerOffsetY2=n.touches[1].clientY,this.controlCoordinates.initialOffsetX=parseFloat(this.currentImage.dataset.translateX),this.controlCoordinates.initialOffsetY=parseFloat(this.currentImage.dataset.translateY),this.controlCoordinates.pinchOffsetX=(this.controlCoordinates.initialPointerOffsetX+this.controlCoordinates.initialPointerOffsetX2)/2,this.controlCoordinates.pinchOffsetY=(this.controlCoordinates.initialPointerOffsetY+this.controlCoordinates.initialPointerOffsetY2)/2,this.controlCoordinates.initialPinchDistance=Math.sqrt((this.controlCoordinates.initialPointerOffsetX-this.controlCoordinates.initialPointerOffsetX2)*(this.controlCoordinates.initialPointerOffsetX-this.controlCoordinates.initialPointerOffsetX2)+(this.controlCoordinates.initialPointerOffsetY-this.controlCoordinates.initialPointerOffsetY2)*(this.controlCoordinates.initialPointerOffsetY-this.controlCoordinates.initialPointerOffsetY2)));this.controlCoordinates.capture=!0}return this.controlCoordinates.mousedown?!0:(this.transitionCapable&&(this.controlCoordinates.imageLeft=parseInt(this.domNodes.image.style.left,10)),this.controlCoordinates.mousedown=!0,this.controlCoordinates.swipeDiff=0,this.controlCoordinates.swipeYDiff=0,this.controlCoordinates.swipeStart=n.pageX||n.touches[0].pageX,this.controlCoordinates.swipeYStart=n.pageY||n.touches[0].pageY,!1)}),this.addEventListener(this.domNodes.image,["touchmove."+this.eventNamespace,"mousemove."+this.eventNamespace,"MSPointerMove"],n=>{if(!this.controlCoordinates.mousedown)return!0;if(n.type==="touchmove"){if(this.controlCoordinates.capture===!1)return!1;this.controlCoordinates.pointerOffsetX=n.touches[0].clientX,this.controlCoordinates.pointerOffsetY=n.touches[0].clientY,this.controlCoordinates.touchCount=n.touches.length,this.controlCoordinates.touchmoveCount++,this.controlCoordinates.touchCount>1?(this.controlCoordinates.pointerOffsetX2=n.touches[1].clientX,this.controlCoordinates.pointerOffsetY2=n.touches[1].clientY,this.controlCoordinates.targetPinchDistance=Math.sqrt((this.controlCoordinates.pointerOffsetX-this.controlCoordinates.pointerOffsetX2)*(this.controlCoordinates.pointerOffsetX-this.controlCoordinates.pointerOffsetX2)+(this.controlCoordinates.pointerOffsetY-this.controlCoordinates.pointerOffsetY2)*(this.controlCoordinates.pointerOffsetY-this.controlCoordinates.pointerOffsetY2)),this.controlCoordinates.initialPinchDistance===null&&(this.controlCoordinates.initialPinchDistance=this.controlCoordinates.targetPinchDistance),Math.abs(this.controlCoordinates.initialPinchDistance-this.controlCoordinates.targetPinchDistance)>=1&&(this.controlCoordinates.targetScale=this.minMax(this.controlCoordinates.targetPinchDistance/this.controlCoordinates.initialPinchDistance*this.controlCoordinates.initialScale,1,this.options.maxZoom),this.controlCoordinates.limitOffsetX=(this.controlCoordinates.imgWidth*this.controlCoordinates.targetScale-this.controlCoordinates.containerWidth)/2,this.controlCoordinates.limitOffsetY=(this.controlCoordinates.imgHeight*this.controlCoordinates.targetScale-this.controlCoordinates.containerHeight)/2,this.controlCoordinates.scaleDifference=this.controlCoordinates.targetScale-this.controlCoordinates.initialScale,this.controlCoordinates.targetOffsetX=this.controlCoordinates.imgWidth*this.controlCoordinates.targetScale<=this.controlCoordinates.containerWidth?0:this.minMax(this.controlCoordinates.initialOffsetX-(this.controlCoordinates.pinchOffsetX-this.controlCoordinates.containerOffsetX-this.controlCoordinates.containerWidth/2-this.controlCoordinates.initialOffsetX)/(this.controlCoordinates.targetScale-this.controlCoordinates.scaleDifference)*this.controlCoordinates.scaleDifference,this.controlCoordinates.limitOffsetX*-1,this.controlCoordinates.limitOffsetX),this.controlCoordinates.targetOffsetY=this.controlCoordinates.imgHeight*this.controlCoordinates.targetScale<=this.controlCoordinates.containerHeight?0:this.minMax(this.controlCoordinates.initialOffsetY-(this.controlCoordinates.pinchOffsetY-this.controlCoordinates.containerOffsetY-this.controlCoordinates.containerHeight/2-this.controlCoordinates.initialOffsetY)/(this.controlCoordinates.targetScale-this.controlCoordinates.scaleDifference)*this.controlCoordinates.scaleDifference,this.controlCoordinates.limitOffsetY*-1,this.controlCoordinates.limitOffsetY),this.zoomPanElement(this.controlCoordinates.targetOffsetX+"px",this.controlCoordinates.targetOffsetY+"px",this.controlCoordinates.targetScale),this.controlCoordinates.targetScale>1&&(this.controlCoordinates.zoomed=!0,(!this.domNodes.caption.style.opacity||this.domNodes.caption.style.opacity>0)&&this.domNodes.caption.style.display!=="none"&&this.fadeOut(this.domNodes.caption,this.options.fadeSpeed)),this.controlCoordinates.initialPinchDistance=this.controlCoordinates.targetPinchDistance,this.controlCoordinates.initialScale=this.controlCoordinates.targetScale,this.controlCoordinates.initialOffsetX=this.controlCoordinates.targetOffsetX,this.controlCoordinates.initialOffsetY=this.controlCoordinates.targetOffsetY)):(this.controlCoordinates.targetScale=this.controlCoordinates.initialScale,this.controlCoordinates.limitOffsetX=(this.controlCoordinates.imgWidth*this.controlCoordinates.targetScale-this.controlCoordinates.containerWidth)/2,this.controlCoordinates.limitOffsetY=(this.controlCoordinates.imgHeight*this.controlCoordinates.targetScale-this.controlCoordinates.containerHeight)/2,this.controlCoordinates.targetOffsetX=this.controlCoordinates.imgWidth*this.controlCoordinates.targetScale<=this.controlCoordinates.containerWidth?0:this.minMax(this.controlCoordinates.pointerOffsetX-(this.controlCoordinates.initialPointerOffsetX-this.controlCoordinates.initialOffsetX),this.controlCoordinates.limitOffsetX*-1,this.controlCoordinates.limitOffsetX),this.controlCoordinates.targetOffsetY=this.controlCoordinates.imgHeight*this.controlCoordinates.targetScale<=this.controlCoordinates.containerHeight?0:this.minMax(this.controlCoordinates.pointerOffsetY-(this.controlCoordinates.initialPointerOffsetY-this.controlCoordinates.initialOffsetY),this.controlCoordinates.limitOffsetY*-1,this.controlCoordinates.limitOffsetY),Math.abs(this.controlCoordinates.targetOffsetX)===Math.abs(this.controlCoordinates.limitOffsetX)&&(this.controlCoordinates.initialOffsetX=this.controlCoordinates.targetOffsetX,this.controlCoordinates.initialPointerOffsetX=this.controlCoordinates.pointerOffsetX),Math.abs(this.controlCoordinates.targetOffsetY)===Math.abs(this.controlCoordinates.limitOffsetY)&&(this.controlCoordinates.initialOffsetY=this.controlCoordinates.targetOffsetY,this.controlCoordinates.initialPointerOffsetY=this.controlCoordinates.pointerOffsetY),this.setZoomData(this.controlCoordinates.initialScale,this.controlCoordinates.targetOffsetX,this.controlCoordinates.targetOffsetY),this.zoomPanElement(this.controlCoordinates.targetOffsetX+"px",this.controlCoordinates.targetOffsetY+"px",this.controlCoordinates.targetScale))}if(n.type==="mousemove"&&this.controlCoordinates.mousedown){if(n.type=="touchmove")return!0;if(n.preventDefault(),this.controlCoordinates.capture===!1)return!1;this.controlCoordinates.pointerOffsetX=n.clientX,this.controlCoordinates.pointerOffsetY=n.clientY,this.controlCoordinates.targetScale=this.controlCoordinates.initialScale,this.controlCoordinates.limitOffsetX=(this.controlCoordinates.imgWidth*this.controlCoordinates.targetScale-this.controlCoordinates.containerWidth)/2,this.controlCoordinates.limitOffsetY=(this.controlCoordinates.imgHeight*this.controlCoordinates.targetScale-this.controlCoordinates.containerHeight)/2,this.controlCoordinates.targetOffsetX=this.controlCoordinates.imgWidth*this.controlCoordinates.targetScale<=this.controlCoordinates.containerWidth?0:this.minMax(this.controlCoordinates.pointerOffsetX-(this.controlCoordinates.initialPointerOffsetX-this.controlCoordinates.initialOffsetX),this.controlCoordinates.limitOffsetX*-1,this.controlCoordinates.limitOffsetX),this.controlCoordinates.targetOffsetY=this.controlCoordinates.imgHeight*this.controlCoordinates.targetScale<=this.controlCoordinates.containerHeight?0:this.minMax(this.controlCoordinates.pointerOffsetY-(this.controlCoordinates.initialPointerOffsetY-this.controlCoordinates.initialOffsetY),this.controlCoordinates.limitOffsetY*-1,this.controlCoordinates.limitOffsetY),Math.abs(this.controlCoordinates.targetOffsetX)===Math.abs(this.controlCoordinates.limitOffsetX)&&(this.controlCoordinates.initialOffsetX=this.controlCoordinates.targetOffsetX,this.controlCoordinates.initialPointerOffsetX=this.controlCoordinates.pointerOffsetX),Math.abs(this.controlCoordinates.targetOffsetY)===Math.abs(this.controlCoordinates.limitOffsetY)&&(this.controlCoordinates.initialOffsetY=this.controlCoordinates.targetOffsetY,this.controlCoordinates.initialPointerOffsetY=this.controlCoordinates.pointerOffsetY),this.setZoomData(this.controlCoordinates.initialScale,this.controlCoordinates.targetOffsetX,this.controlCoordinates.targetOffsetY),this.zoomPanElement(this.controlCoordinates.targetOffsetX+"px",this.controlCoordinates.targetOffsetY+"px",this.controlCoordinates.targetScale)}this.controlCoordinates.zoomed||(this.controlCoordinates.swipeEnd=n.pageX||n.touches[0].pageX,this.controlCoordinates.swipeYEnd=n.pageY||n.touches[0].pageY,this.controlCoordinates.swipeDiff=this.controlCoordinates.swipeStart-this.controlCoordinates.swipeEnd,this.controlCoordinates.swipeYDiff=this.controlCoordinates.swipeYStart-this.controlCoordinates.swipeYEnd,this.options.animationSlide&&this.slide(0,-this.controlCoordinates.swipeDiff+"px"))}),this.addEventListener(this.domNodes.image,["touchend."+this.eventNamespace,"mouseup."+this.eventNamespace,"touchcancel."+this.eventNamespace,"mouseleave."+this.eventNamespace,"pointerup","pointercancel","MSPointerUp","MSPointerCancel"],n=>{if(this.isTouchDevice&&n.type==="touchend"&&(this.controlCoordinates.touchCount=n.touches.length,this.controlCoordinates.touchCount===0?(this.currentImage&&this.setZoomData(this.controlCoordinates.initialScale,this.controlCoordinates.targetOffsetX,this.controlCoordinates.targetOffsetY),this.controlCoordinates.initialScale===1&&(this.controlCoordinates.zoomed=!1,this.domNodes.caption.style.display==="none"&&this.fadeIn(this.domNodes.caption,this.options.fadeSpeed)),this.controlCoordinates.initialPinchDistance=null,this.controlCoordinates.capture=!1):this.controlCoordinates.touchCount===1?(this.controlCoordinates.initialPointerOffsetX=n.touches[0].clientX,this.controlCoordinates.initialPointerOffsetY=n.touches[0].clientY):this.controlCoordinates.touchCount>1&&(this.controlCoordinates.initialPinchDistance=null)),this.controlCoordinates.mousedown){this.controlCoordinates.mousedown=!1;let a=!0;this.options.loop||(this.currentImageIndex===0&&this.controlCoordinates.swipeDiff<0&&(a=!1),this.currentImageIndex>=this.relatedElements.length-1&&this.controlCoordinates.swipeDiff>0&&(a=!1)),Math.abs(this.controlCoordinates.swipeDiff)>this.options.swipeTolerance&&a?this.loadImage(this.controlCoordinates.swipeDiff>0?1:-1):this.options.animationSlide&&this.slide(this.options.animationSpeed/1e3,0+"px"),this.options.swipeClose&&Math.abs(this.controlCoordinates.swipeYDiff)>50&&Math.abs(this.controlCoordinates.swipeDiff)<this.options.swipeTolerance&&this.close()}}),this.addEventListener(this.domNodes.image,["dblclick"],n=>{if(!this.isTouchDevice)return this.controlCoordinates.initialPointerOffsetX=n.clientX,this.controlCoordinates.initialPointerOffsetY=n.clientY,this.controlCoordinates.containerHeight=this.getDimensions(this.domNodes.image).height,this.controlCoordinates.containerWidth=this.getDimensions(this.domNodes.image).width,this.controlCoordinates.imgHeight=this.getDimensions(this.currentImage).height,this.controlCoordinates.imgWidth=this.getDimensions(this.currentImage).width,this.controlCoordinates.containerOffsetX=this.domNodes.image.offsetLeft,this.controlCoordinates.containerOffsetY=this.domNodes.image.offsetTop,this.currentImage.classList.add("sl-transition"),this.controlCoordinates.zoomed?(this.controlCoordinates.initialScale=1,this.setZoomData(this.controlCoordinates.initialScale,0,0),this.zoomPanElement(0+"px",0+"px",this.controlCoordinates.initialScale),this.controlCoordinates.zoomed=!1,this.domNodes.caption.style.display==="none"&&this.fadeIn(this.domNodes.caption,this.options.fadeSpeed)):(this.controlCoordinates.initialScale=this.options.doubleTapZoom,this.setZoomData(this.controlCoordinates.initialScale,0,0),this.zoomPanElement(0+"px",0+"px",this.controlCoordinates.initialScale),(!this.domNodes.caption.style.opacity||this.domNodes.caption.style.opacity>0)&&this.domNodes.caption.style.display!=="none"&&this.fadeOut(this.domNodes.caption,this.options.fadeSpeed),this.controlCoordinates.zoomed=!0),setTimeout(()=>{this.currentImage&&(this.currentImage.classList.remove("sl-transition"),this.currentImage.style[this.transitionPrefix+"transform-origin"]=null)},200),this.controlCoordinates.capture=!0,!1})}getDimensions(n){let a=window.getComputedStyle(n),d=n.offsetHeight,g=n.offsetWidth,p=parseFloat(a.borderTopWidth),C=parseFloat(a.borderBottomWidth),v=parseFloat(a.paddingTop),y=parseFloat(a.paddingBottom),S=parseFloat(a.borderLeftWidth),O=parseFloat(a.borderRightWidth),A=parseFloat(a.paddingLeft),m=parseFloat(a.paddingRight);return{height:d-C-p-v-y,width:g-S-O-A-m}}updateHash(){let n="pid="+(this.currentImageIndex+1),a=window.location.href.split("#")[0]+"#"+n;this.hashReseted=!1,this.pushStateSupport?window.history[this.historyHasChanges?"replaceState":"pushState"]("",document.title,a):this.historyHasChanges?window.location.replace(a):window.location.hash=n,this.historyHasChanges||(this.urlChangedOnce=!0),this.historyHasChanges=!0}resetHash(){this.hashReseted=!0,this.urlChangedOnce?history.back():this.pushStateSupport?history.pushState("",document.title,window.location.pathname+window.location.search):window.location.hash="",clearTimeout(this.historyUpdateTimeout)}updateURL(){clearTimeout(this.historyUpdateTimeout),this.historyHasChanges?this.historyUpdateTimeout=setTimeout(this.updateHash.bind(this),800):this.updateHash()}setCaption(n,a,d){if(this.options.captions&&n&&n!==""&&typeof n<"u"){const g=d??this.options.captionHTML??!0?"innerHTML":"innerText";this.hide(this.domNodes.caption),this.domNodes.caption.style.width=a+"px",this.domNodes.caption[g]=n,this.domNodes.image.appendChild(this.domNodes.caption),setTimeout(()=>{this.fadeIn(this.domNodes.caption,this.options.fadeSpeed)},this.options.captionDelay)}}slide(n,a){if(!this.transitionCapable)return this.domNodes.image.style.left=a;this.domNodes.image.style[this.transitionPrefix+"transform"]="translateX("+a+")",this.domNodes.image.style[this.transitionPrefix+"transition"]=this.transitionPrefix+"transform "+n+"s linear"}getRelated(n){let a;return n&&n!==!1&&n!=="nofollow"?a=Array.from(this.elements).filter(d=>d.getAttribute("rel")===n):a=this.elements,a}openImage(n){n.dispatchEvent(new Event("show."+this.eventNamespace)),this.globalScrollbarWidth=this.getScrollbarWidth(),this.options.disableScroll&&(this.toggleScrollbar("hide"),this.globalScrollbarWidth=0),this.options.htmlClass&&this.options.htmlClass!==""&&document.querySelector("html").classList.add(this.options.htmlClass),document.body.appendChild(this.domNodes.wrapper),this.domNodes.wrapper.appendChild(this.domNodes.image),this.options.overlay&&document.body.appendChild(this.domNodes.overlay),this.relatedElements=this.getRelated(n.rel),this.options.showCounter&&(this.relatedElements.length==1&&this.domNodes.wrapper.contains(this.domNodes.counter)?this.domNodes.wrapper.removeChild(this.domNodes.counter):this.relatedElements.length>1&&!this.domNodes.wrapper.contains(this.domNodes.counter)&&this.domNodes.wrapper.appendChild(this.domNodes.counter)),this.options.download&&this.domNodes.download&&this.domNodes.wrapper.appendChild(this.domNodes.download),this.isAnimating=!0,this.currentImageIndex=this.relatedElements.indexOf(n);let a=n.getAttribute(this.options.sourceAttr);this.currentImage=document.createElement("img"),this.currentImage.style.display="none",this.currentImage.setAttribute("src",a),this.currentImage.dataset.scale=1,this.currentImage.dataset.translateX=0,this.currentImage.dataset.translateY=0,this.loadedImages.indexOf(a)===-1&&this.loadedImages.push(a),this.domNodes.image.innerHTML="",this.domNodes.image.setAttribute("style",""),this.domNodes.image.appendChild(this.currentImage),this.fadeIn(this.domNodes.overlay,this.options.fadeSpeed),this.fadeIn([this.domNodes.counter,this.domNodes.navigation,this.domNodes.closeButton,this.domNodes.download],this.options.fadeSpeed),this.show(this.domNodes.spinner),this.domNodes.counter.querySelector(".sl-current").innerHTML=this.currentImageIndex+1,this.domNodes.counter.querySelector(".sl-total").innerHTML=this.relatedElements.length,this.adjustImage(),this.options.preloading&&this.preload(),setTimeout(()=>{n.dispatchEvent(new Event("shown."+this.eventNamespace))},this.options.animationSpeed)}forceFocus(){this.removeEventListener(document,"focusin."+this.eventNamespace),this.addEventListener(document,"focusin."+this.eventNamespace,n=>{document!==n.target&&this.domNodes.wrapper!==n.target&&!this.domNodes.wrapper.contains(n.target)&&this.domNodes.wrapper.focus()})}addEventListener(n,a,d,g){n=this.wrap(n),a=this.wrap(a);for(let p of n){p.namespaces||(p.namespaces={});for(let C of a){let v=g||!1;["touchstart","touchmove","mousewheel","DOMMouseScroll"].indexOf(C.split(".")[0])>=0&&this.isPassiveEventsSupported&&(typeof v=="object"?v.passive=!0:v={passive:!0}),p.namespaces[C]=d,p.addEventListener(C.split(".")[0],d,v)}}}removeEventListener(n,a){n=this.wrap(n),a=this.wrap(a);for(let d of n)for(let g of a)d.namespaces&&d.namespaces[g]&&(d.removeEventListener(g.split(".")[0],d.namespaces[g]),delete d.namespaces[g])}fadeOut(n,a,d){n=this.wrap(n);for(let C of n)C.style.opacity=parseFloat(C)||window.getComputedStyle(C).getPropertyValue("opacity");this.isFadeIn=!1;let g=16.66666/(a||this.options.fadeSpeed),p=()=>{let C=parseFloat(n[0].style.opacity);if((C-=g)<0){for(let v of n)v.style.display="none",v.style.opacity=1;d&&d.call(this,n)}else{for(let v of n)v.style.opacity=C;requestAnimationFrame(p)}};p()}fadeIn(n,a,d,g){n=this.wrap(n);for(let y of n)y&&(y.style.opacity=0,y.style.display=g||"block");this.isFadeIn=!0;let p=parseFloat(n[0].dataset.opacityTarget||1),C=16.66666*p/(a||this.options.fadeSpeed),v=()=>{let y=parseFloat(n[0].style.opacity);if((y+=C)>p){for(let S of n)S&&(S.style.opacity=p);d&&d.call(this,n)}else{for(let S of n)S&&(S.style.opacity=y);if(!this.isFadeIn)return;requestAnimationFrame(v)}};v()}hide(n){n=this.wrap(n);for(let a of n)a.style.display!="none"&&(a.dataset.initialDisplay=a.style.display),a.style.display="none"}show(n,a){n=this.wrap(n);for(let d of n)d.style.display=d.dataset.initialDisplay||a||"block"}wrap(n){return typeof n[Symbol.iterator]=="function"&&typeof n!="string"?n:[n]}on(n,a){n=this.wrap(n);for(let d of this.elements){d.fullyNamespacedEvents||(d.fullyNamespacedEvents={});for(let g of n)d.fullyNamespacedEvents[g]=a,d.addEventListener(g,a)}return this}off(n){n=this.wrap(n);for(let a of this.elements)for(let d of n)typeof a.fullyNamespacedEvents<"u"&&d in a.fullyNamespacedEvents&&a.removeEventListener(d,a.fullyNamespacedEvents[d]);return this}open(n,a=0){n=n||this.elements[0],typeof jQuery<"u"&&n instanceof jQuery&&(n=n.get(0)),a>0&&(n=this.elements[a]),this.initialImageIndex=this.elements.indexOf(n),this.initialImageIndex>-1&&this.openImage(n)}openPosition(n){let a=this.elements[n];this.open(a,n)}next(){this.loadImage(1)}prev(){this.loadImage(-1)}getLighboxData(){return{currentImageIndex:this.currentImageIndex,currentImage:this.currentImage,globalScrollbarWidth:this.globalScrollbarWidth}}destroy(){this.off(["close."+this.eventNamespace,"closed."+this.eventNamespace,"nextImageLoaded."+this.eventNamespace,"prevImageLoaded."+this.eventNamespace,"change."+this.eventNamespace,"nextDone."+this.eventNamespace,"prevDone."+this.eventNamespace,"error."+this.eventNamespace,"changed."+this.eventNamespace,"next."+this.eventNamespace,"prev."+this.eventNamespace,"show."+this.eventNamespace,"shown."+this.eventNamespace]),this.removeEventListener(this.elements,"click."+this.eventNamespace),this.removeEventListener(document,"focusin."+this.eventNamespace),this.removeEventListener(document.body,"contextmenu."+this.eventNamespace),this.removeEventListener(document.body,"keyup."+this.eventNamespace),this.removeEventListener(this.domNodes.navigation.getElementsByTagName("button"),"click."+this.eventNamespace),this.removeEventListener(this.domNodes.closeButton,"click."+this.eventNamespace),this.removeEventListener(window,"resize."+this.eventNamespace),this.removeEventListener(window,"hashchange."+this.eventNamespace),this.close(),this.isOpen&&(document.body.removeChild(this.domNodes.wrapper),document.body.removeChild(this.domNodes.overlay)),this.elements=null}refresh(){if(!this.initialSelector)throw"refreshing only works when you initialize using a selector!";let n=this.options,a=this.initialSelector;return this.destroy(),this.constructor(a,n),this}}global.SimpleLightbox=j;export{U as S,j as a,$ as s};
//# sourceMappingURL=vendor-267c3afd.js.map
